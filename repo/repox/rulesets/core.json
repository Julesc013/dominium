{
  "ruleset_id": "repox/core",
  "documentation": "docs/governance/REPOX_RULESETS.md#repoxcore",
  "rules": [
    {
      "rule_id": "INV-REPOX-STRUCTURE",
      "severity": "FAIL",
      "scope_paths": ["."],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-repox-structure",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-LOCKLIST-FROZEN",
      "severity": "FAIL",
      "scope_paths": ["docs/architecture", "docs/archive"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-locklist-frozen",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-CANON-STATE",
      "severity": "FAIL",
      "scope_paths": ["repo/canon_state.json", "docs/architecture"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-canon-state",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-CANON-INDEX",
      "severity": "FAIL",
      "scope_paths": ["docs/architecture/CANON_INDEX.md", "docs"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-canon-index",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-CANON-NO-SUPERSEDED",
      "severity": "FAIL",
      "scope_paths": ["docs"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-canon-no-superseded",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-CANON-NO-HIST-REF",
      "severity": "FAIL",
      "scope_paths": ["docs"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-canon-no-hist-ref",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-CANON-CODE-REF",
      "severity": "FAIL",
      "scope_paths": ["engine", "game", "client", "server", "tools", "scripts"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-canon-code-ref",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-DOC-STATUS-HEADER",
      "severity": "FAIL",
      "scope_paths": ["docs"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-doc-status-header",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-AUDITX-PROMOTION-POLICY-PRESENT",
      "severity": "FAIL",
      "scope_paths": ["docs/governance/AUDITX_PROMOTION_POLICY.md", "scripts/ci/check_repox_rules.py"],
      "documentation": "docs/governance/AUDITX_PROMOTION_POLICY.md",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-REPO-HEALTH-SNAPSHOT-FINALIZATION",
      "severity": "FAIL",
      "scope_paths": ["docs/audit/system/GOVERNANCE_FINAL_REPORT.md", "docs/audit/system/REPO_HEALTH_SNAPSHOT.json", "tools/xstack/core/repo_health.py"],
      "documentation": "docs/governance/GATE_THROUGHPUT_POLICY.md#repo-health-snapshot",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-ONTOLOGY-IMMUTABLE",
      "severity": "FAIL",
      "scope_paths": ["docs/governance/GOVERNANCE_ARCHITECTURE.md", "docs/architecture", "repo/canon_state.json", "scripts/ci/check_repox_rules.py"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-ontology-immutable",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-DET-NO-ANON-RNG",
      "severity": "FAIL",
      "scope_paths": ["engine", "game"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-det-no-anon-rng",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-DET-NO-WALLCLOCK",
      "severity": "FAIL",
      "scope_paths": ["engine", "game"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-det-no-wallclock",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-FP-AUTH-BAN",
      "severity": "FAIL",
      "scope_paths": ["engine", "game"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-fp-auth-ban",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-NO-HARDCODED-CONTENT",
      "severity": "FAIL",
      "scope_paths": ["engine", "game"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-no-hardcoded-content",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-ENUM-NO-OTHER",
      "severity": "FAIL",
      "scope_paths": ["engine", "game"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-enum-no-other",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-NO-RAW-PATHS",
      "severity": "FAIL",
      "scope_paths": ["schema", "data", "tests/fixtures"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-no-raw-paths",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-COMPAT-MATRIX-VALID",
      "severity": "FAIL",
      "scope_paths": ["schema/governance/compat_matrix.schema", "data/registries/compat_matrix.json"],
      "documentation": "docs/governance/COMPATX_MODEL.md#compatibility-philosophy",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-COMPAT-MIGRATIONS-VALID",
      "severity": "FAIL",
      "scope_paths": ["schema/governance/migration_spec.schema", "data/registries/migrations.json"],
      "documentation": "docs/governance/COMPATX_MODEL.md#compatibility-philosophy",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-SCHEMA-VERSION-POLICY",
      "severity": "FAIL",
      "scope_paths": ["schema/governance/schema_version_policy.schema", "data/registries/schema_version_policy.json"],
      "documentation": "docs/governance/COMPATX_MODEL.md#compatibility-philosophy",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "WARN-SCHEMA-DEPRECATED-FIELDS",
      "severity": "WARN",
      "scope_paths": ["schema", "data/registries/schema_version_policy.json"],
      "documentation": "docs/governance/COMPATX_MODEL.md#compatibility-philosophy",
      "exemption_policy": "allow_with_expiry",
      "ratchet_after": "2099-01-01"
    },
    {
      "rule_id": "INV-PROCESS-REGISTRY",
      "severity": "FAIL",
      "scope_paths": ["data/registries", "data/packs", "tests/contract"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-process-registry",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-PROCESS-RUNTIME-ID",
      "severity": "FAIL",
      "scope_paths": ["engine", "game", "client", "server"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-process-runtime-id",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-PROCESS-GUARD-RUNTIME",
      "severity": "FAIL",
      "scope_paths": ["engine/include/domino/core/process_guard.h", "engine/modules/core/process_guard.c", "engine/tests/process_guard_tests.c", "tests/invariant/process_only_mutation_tests.py"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-process-guard-runtime",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-PROCESS-REGISTRY-IMMUTABLE",
      "severity": "FAIL",
      "scope_paths": ["data/registries/process_registry.json"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-process-registry-immutable",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-REPORT-CANON",
      "severity": "FAIL",
      "scope_paths": ["scripts/ci/compliance_report.py"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-report-canon",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-REPOX-RULESET-MISSING",
      "severity": "FAIL",
      "scope_paths": ["repo/repox/rulesets"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-repox-ruleset-missing",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-REPOX-EXEMPTION-POLICY",
      "severity": "FAIL",
      "scope_paths": ["repo/repox/repox_exemptions.json", "scripts/ci/check_repox_rules.py"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-repox-exemption-policy",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-IDENTITY-FINGERPRINT",
      "severity": "FAIL",
      "scope_paths": ["docs/audit/identity_fingerprint.json", "scripts/ci/check_repox_rules.py"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-identity-fingerprint",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-IDENTITY-CHANGE-EXPLANATION",
      "severity": "FAIL",
      "scope_paths": ["docs/audit/identity_fingerprint_explanation.md", "scripts/ci/check_repox_rules.py"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-identity-fingerprint",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-FAILURE-CLASS-COVERAGE",
      "severity": "FAIL",
      "scope_paths": ["schema/governance/failure_classes.schema", "data/registries/failure_classes.json", "tests"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-failure-class-coverage",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-SETTINGS-OWNERSHIP",
      "severity": "FAIL",
      "scope_paths": ["client", "launcher", "setup", "docs/settings/SETTINGS_OWNERSHIP_MODEL.md"],
      "documentation": "docs/settings/SETTINGS_OWNERSHIP_MODEL.md#forbidden-overlaps",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-NO-ENGINE-SETTINGS",
      "severity": "FAIL",
      "scope_paths": ["engine", "game", "docs/settings/SETTINGS_OWNERSHIP_MODEL.md"],
      "documentation": "docs/settings/SETTINGS_OWNERSHIP_MODEL.md#ownership",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-NO-HARDCODED-MODE-BRANCH",
      "severity": "FAIL",
      "scope_paths": ["engine", "game", "client", "server", "launcher", "setup", "tools", "libs", "scripts"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-no-hardcoded-mode-branch",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-AUTHORITY-CONTEXT-REQUIRED",
      "severity": "FAIL",
      "scope_paths": ["schema/session/session_spec.schema", "schema/authority/authority_context.schema"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-authority-context-required",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-SURVIVAL-NO-NONDIEGETIC-LENSES",
      "severity": "FAIL",
      "scope_paths": ["data/registries/law_profiles.json", "data/registries/lenses.json", "schema/lens/lens.schema"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-survival-no-nondiegetic-lenses",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-SURVIVAL-DIEGETIC-CONTRACT",
      "severity": "FAIL",
      "scope_paths": ["data/registries/law_profiles.json", "client/core/client_command_bridge.c", "schema/lens/lens.schema"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-survival-diegetic-contract",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-GLOSSARY-TERM-CANON",
      "severity": "FAIL",
      "scope_paths": ["schema/governance/glossary.schema", "data/registries/glossary.json", "docs/architecture", "docs/governance"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-glossary-term-canon",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "WARN-GLOSSARY-TERM-CANON",
      "severity": "WARN",
      "scope_paths": ["docs"],
      "documentation": "docs/governance/REPOX_RULESETS.md#warn-glossary-term-canon",
      "exemption_policy": "allow_with_expiry",
      "ratchet_after": "2099-01-01"
    },
    {
      "rule_id": "INV-UNIVERSE_IDENTITY_IMMUTABLE",
      "severity": "FAIL",
      "scope_paths": ["schema/universe/universe_identity.schema", "schema/universe/universe_state.schema", "engine", "game", "client", "server", "launcher", "setup"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-universe-identity-immutable",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-AUTHORITY_CONTEXT_REQUIRED_FOR_INTENTS",
      "severity": "FAIL",
      "scope_paths": ["schema/authority/authority_context.schema", "client/core/client_command_bridge.c", "server/authority/dom_server_authority.h", "server/authority/dom_server_authority.cpp"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-authority-context-required-for-intents",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-SESSION_SPEC_REQUIRED_FOR_RUN",
      "severity": "FAIL",
      "scope_paths": ["schema/session/session_spec.schema", "data/registries/session_defaults.json", "client/core/client_command_bridge.c", "client/core/client_commands_registry.c"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-session-spec-required-for-run",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-MODE-AS-PROFILES",
      "severity": "FAIL",
      "scope_paths": ["data/registries/law_profiles.json", "data/registries/experience_profiles.json", "data/registries/parameter_bundles.json"],
      "documentation": "docs/governance/MODE_GOVERNANCE_POLICY.md#modes-as-profiles-invariants",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-UI-ENTITLEMENT-GATING",
      "severity": "FAIL",
      "scope_paths": ["client/core/client_commands_registry.c", "client/core/client_command_bridge.c"],
      "documentation": "docs/governance/MODE_GOVERNANCE_POLICY.md#entitlement-gating",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-PRESENTATION-MATRIX-INTEGRITY",
      "severity": "FAIL",
      "scope_paths": [
        "schema/governance/presentation_matrix.schema",
        "data/registries/presentation_matrix.json",
        "data/registries/law_profiles.json",
        "data/registries/lenses.json",
        "client/core/client_commands_registry.c"
      ],
      "documentation": "docs/governance/MODE_GOVERNANCE_POLICY.md#presentation-matrix-integrity",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-DEFAULTS-OPTIONAL",
      "severity": "FAIL",
      "scope_paths": ["data/registries/bundle_profiles.json"],
      "documentation": "docs/governance/MODE_GOVERNANCE_POLICY.md#optional-default-bundles",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-ROOT-MODULE-SHIM",
      "severity": "FAIL",
      "scope_paths": ["CMakeLists.txt", "*/CMakeLists.txt", "libs", "engine", "game", "client", "server", "launcher", "setup", "tools", "app"],
      "documentation": "docs/governance/REPOX_RULESETS.md#inv-root-module-shim",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-NO-TRACKED-WRITES-DURING-GATE",
      "severity": "FAIL",
      "scope_paths": ["scripts/dev/gate.py", ".xstack_cache/gate/TOUCHED_FILES_MANIFEST.json"],
      "documentation": "docs/governance/XSTACK_TRACK_IGNORE_POLICY.md#command-write-behavior",
      "exemption_policy": "deny"
    },
    {
      "rule_id": "INV-RUNTIME-NO-XSTACK-IMPORTS",
      "severity": "FAIL",
      "scope_paths": ["engine", "game", "client", "server", "CMakeLists.txt"],
      "documentation": "docs/governance/XSTACK_PORTABILITY.md#runtime-decoupling-contract",
      "exemption_policy": "deny"
    }
  ]
}
