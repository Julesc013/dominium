# CI Enforcement Matrix (ENF0)

This matrix defines mandatory, mechanical CI enforcement for architectural law.
All failures are merge-blocking.

## Enforcement Table

| ID | Description | Enforcement Mechanism | Stage | Failure Mode | Remediation | Rationale |
| --- | --- | --- | --- | --- | --- | --- |
| ARCH-TOP-001 | Top-level `source/`, `src/`, `common_source/` are FORBIDDEN. | Repo layout lint (tools/ci/arch_checks.py) | Configure | CI fail: ARCH-TOP-001 | Remove or relocate the directory into a canonical top-level domain. | Prevents ambiguous ownership and drift. |
| ARCH-OWN-002 | `engine/` and `game/` responsibilities MUST NOT be merged. | Repo layout + target graph check | Configure | CI fail: ARCH-OWN-002 | Split responsibilities and restore separation between engine and game targets. | Preserves core layering and portability. |
| ARCH-DEP-001 | `engine/` MUST NOT reference or link `game/`, `launcher/`, `setup/`, or `tools/`. | Target graph rule + static scan (tools/ci/arch_checks.py) | Configure | CI fail: ARCH-DEP-001 | Remove forbidden references and use engine public APIs only. | Keeps engine as the dependency root. |
| ARCH-DEP-002 | `game/` MAY depend only on `engine/`. | Target graph rule in CMake | Configure | CI fail: ARCH-DEP-002 | Remove illegal dependencies and rewire through engine public APIs. | Maintains clear ownership of rules. |
| ARCH-DEP-003 | `client/` MAY depend only on `engine/` and `game/`. | Target graph rule in CMake | Configure | CI fail: ARCH-DEP-003 | Remove illegal dependencies and use engine/game public APIs. | Prevents client coupling to tools or setup. |
| ARCH-DEP-004 | `server/` MAY depend only on `engine/` and `game/`. | Target graph rule in CMake | Configure | CI fail: ARCH-DEP-004 | Remove illegal dependencies and use engine/game public APIs. | Keeps server authoritative and focused. |
| ARCH-DEP-005 | `tools/` MAY depend only on `engine/` and `game/`. | Target graph rule in CMake | Configure | CI fail: ARCH-DEP-005 | Remove illegal dependencies and use engine/game public APIs. | Avoids tool-to-runtime coupling. |
| ARCH-DEP-006 | `launcher/` and `setup/` MAY depend only on `libs/` and `schema/`. | Target graph rule in CMake | Configure | CI fail: ARCH-DEP-006 | Remove engine/game dependencies and use schema contracts only. | Keeps operational tools separate from runtime. |
| ARCH-INC-001 | `game/` includes from `engine/modules/**` or platform headers are FORBIDDEN. | Compile-time include guard + static scan (tools/ci/arch_checks.py) | Build | CI fail: ARCH-INC-001 | Replace with `engine/include/**` public headers; remove platform headers from game. | Enforces API boundaries. |
| ARCH-INC-002 | `client/`, `server/`, `tools/` include from `engine/modules/**` are FORBIDDEN. | Compile-time include guard + static scan (tools/ci/arch_checks.py) | Build | CI fail: ARCH-INC-002 | Replace with `engine/include/**` public headers. | Protects internal engine modules. |
| ARCH-INC-003 | Public headers MUST live in `engine/include/**` only. | CMake configure-time public-include assertion (`domino_engine`) | Configure | CI fail: ARCH-INC-003 | Move or re-export headers via `engine/include/**`. | Prevents accidental API exposure. |
| ARCH-RENDER-001 | Renderer-specific code outside `engine/render/**` is FORBIDDEN. | Path-based static scan (tools/ci/arch_checks.py) | Configure | CI fail: ARCH-RENDER-001 | Move code into `engine/render/**` and expose public API. | Centralizes renderer ownership. |
| ARCH-REN-002 | `game/` MUST NOT branch on graphics APIs. | Static scan for backend tokens | Configure | CI fail: ARCH-REN-002 | Move backend choice to engine render layer. | Keeps game logic renderer-agnostic. |
| ARCH-REN-003 | `client/` MUST NOT own renderer backends. | Target graph + path scan | Configure | CI fail: ARCH-REN-003 | Relocate backend code to `engine/render/**`. | Prevents client-only renderer forks. |
| REND-DIR-001 | Backend directories outside `engine/render/backends/**` are FORBIDDEN. | Path-based scan (future hook) | Configure | CI fail: REND-DIR-001 | Move backend code under `engine/render/backends/**`. | Enforces renderer ownership boundaries. |
| REND-DIR-002 | Capability-named backend folders are FORBIDDEN (`implicit/`, `legacy/`, etc.). | Path-based scan (future hook) | Configure | CI fail: REND-DIR-002 | Use renderer identity folders only. | Prevents capability-based layout drift. |
| REND-DIR-003 | Version bucket folders are FORBIDDEN (`gl2_3/`, `metal3_4/`, etc.). | Path-based scan (future hook) | Configure | CI fail: REND-DIR-003 | Encode versions via RenderCaps, not folders. | Keeps folder identity stable. |
| REND-API-001 | `game/` references backend headers or API types are FORBIDDEN. | Static scan (future hook) | Configure | CI fail: REND-API-001 | Route through engine render API only. | Preserves engine/game boundary. |
| REND-LEG-001 | Fixed-function backends MUST NOT modify core contracts. | Forbidden-include scan (future hook) | Configure | CI fail: REND-LEG-001 | Keep legacy backends as sinks only. | Prevents legacy-driven abstraction creep. |
| REND-FEAT-001 | Feature modules missing requires/fallback/cost are FORBIDDEN. | Feature validator (future hook) | Configure | CI fail: REND-FEAT-001 | Add required declarations. | Enforces scalable content. |
| REND-DET-001 | Renderer writes to authoritative state or hashes are FORBIDDEN. | Determinism test (future hook) | Test | CI fail: REND-DET-001 | Remove render feedback into sim state. | Protects determinism. |
| ARCH-SETUP-001 | `launcher/` or `setup/` depending on engine internals is FORBIDDEN. | Target graph rule in CMake | Configure | CI fail: ARCH-SETUP-001 | Remove the dependency and use `libs/` or `schema/`. | Avoids coupling operational tools to runtime. |
| DET-FLOAT-003 | Floating point usage or math headers in authoritative zones are FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: DET-FLOAT-003 | Replace with deterministic fixed-point or approved math. | Prevents nondeterministic math. |
| DET-TIME-001 | OS time APIs in authoritative zones are FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: DET-TIME-001 | Use ACT time and deterministic scheduling only. | Eliminates wall-clock variance. |
| DET-RNG-002 | Non-deterministic RNG in authoritative zones is FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: DET-RNG-002 | Use engine deterministic RNG only. | Ensures replayable randomness. |
| DET-ORD-004 | Unordered container iteration without normalization is FORBIDDEN. | Lint + static scan (tools/ci/arch_checks.py) | Configure | CI fail: DET-ORD-004 | Normalize ordering or use ordered containers. | Removes hash-order variance. |
| DET-ORDER-TEST-001 | Event queue ordering is deterministic under permuted insertions. | CTest `engine_det_order` | Test | CI fail: DET-ORDER-TEST-001 | Fix event queue ordering or tie-break keys. | Prevents event scheduling drift. |
| DET-ORDER-TEST-002 | Ledger obligation ordering is deterministic under permuted insertions. | CTest `engine_det_order` | Test | CI fail: DET-ORDER-TEST-002 | Ensure obligation order key uses stable IDs. | Preserves ledger determinism. |
| DET-ORDER-TEST-003 | Interest set ordering is deterministic under permuted insertions. | CTest `engine_det_order` | Test | CI fail: DET-ORDER-TEST-003 | Normalize interest volumes by canonical keys. | Preserves interest-set determinism. |
| DET-THREAD-005 | Nondeterministic shared mutable state is FORBIDDEN. | Threading lint + race-focused tests | Test | CI fail: DET-THREAD-005 | Add deterministic scheduling or remove shared writes. | Prevents race-driven divergence. |
| DET-GATE-STEP-001 | Step vs batch equivalence MUST hold. | Determinism test suite | Test | CI fail: DET-GATE-STEP-001 | Fix update order or accumulation errors. | Ensures execution-mode equivalence. |
| DET-GATE-REPLAY-002 | Replay equivalence MUST hold. | Replay determinism suite | Test | CI fail: DET-GATE-REPLAY-002 | Remove nondeterministic inputs or ordering. | Protects replay and auditability. |
| DET-GATE-LOCKSTEP-003 | Lockstep vs server-auth equivalence MUST hold. | Network determinism suite | Test | CI fail: DET-GATE-LOCKSTEP-003 | Align authoritative rules and client prediction. | Maintains network determinism. |
| DET-GATE-HASH-004 | Hash partition invariance MUST hold. | Shard invariance suite | Test | CI fail: DET-GATE-HASH-004 | Normalize partition ordering and hash inputs. | Preserves sharding correctness. |
| DET-EXC-006 | Determinism exceptions are FORBIDDEN. | Policy scan for exception tags | Configure | CI fail: DET-EXC-006 | Remove the exception and fix root determinism issue. | Prevents erosion of determinism law. |
| DET-G1 | Step vs batch equivalence MUST hold. | Determinism suite (DET0 matrix) | Test | CI fail: DET-G1 | Fix update order or batch stepping logic. | Ensures step and batch equivalence. |
| DET-G2 | Replay equivalence MUST hold. | Replay determinism suite (DET0 matrix) | Test | CI fail: DET-G2 | Fix nondeterministic inputs or ordering. | Protects replay fidelity. |
| DET-G3 | Lockstep parity MUST hold. | Lockstep determinism suite (DET0 matrix) | Test | CI fail: DET-G3 | Align peer ordering and sync rules. | Preserves lockstep convergence. |
| DET-G4 | Server-auth parity MUST hold. | Server-auth determinism suite (DET0 matrix) | Test | CI fail: DET-G4 | Fix authoritative state divergence. | Preserves server authority. |
| DET-G5 | No float/OS time/nondeterministic RNG in authoritative dirs. | Static scan + compile checks | Configure | CI fail: DET-G5 | Remove forbidden constructs in authoritative paths. | Prevents nondeterministic inputs. |
| DET-G6 | Canonical ordering under permuted insertions MUST hold. | Ordering invariance suite | Test | CI fail: DET-G6 | Normalize container ordering. | Prevents order-dependent divergence. |
| PERF-GLOBAL-002 | Global iteration in runtime update paths is FORBIDDEN. | Lint (tools/ci/arch_checks.py) + fixture test | Test | CI fail: PERF-GLOBAL-002 | Convert to event-driven, interest-set bounded processing. | Avoids O(N) frame scaling. |
| PERF-EVT-001 | Macro scheduler processes only due entries (latent universe stays bounded). | CTest `engine_due_sched` | Test | CI fail: PERF-EVT-001 | Register macro objects with due scheduler; avoid global sweeps. | Keeps idle universe near-zero cost. |
| PERF-EVT-002 | Deterministic ordering for due-event processing is enforced. | CTest `engine_due_sched` | Test | CI fail: PERF-EVT-002 | Provide stable keys and deterministic queues. | Prevents order-dependent divergence. |
| PERF-IOBAN-001 | Render/UI thread IO is FORBIDDEN. | Runtime guard + CTest `engine_perf_no_modal` | Test | CI fail: PERF-IOBAN-001 | Move IO to derived jobs; keep UI/render thread no-block. | Prevents blocking IO hitches. |
| PERF-MODAL-001 | Blocking IO on render/UI threads is FORBIDDEN. | Runtime trace + watchdog | Test | CI fail: PERF-MODAL-001 | Move IO to background jobs and stream results. | Prevents hitches and stalls. |
| PERF-SHADER-002 | Shader compilation on demand is FORBIDDEN. | Runtime trace + build audit | Test | CI fail: PERF-SHADER-002 | Precompile shaders or compile during preload. | Avoids runtime shader stalls. |
| PERF-ASSET-003 | Synchronous asset decode on render/UI threads is FORBIDDEN. | Runtime trace | Test | CI fail: PERF-ASSET-003 | Decode asynchronously and cache results. | Keeps UI smooth under load. |
| PERF-STALL-001 | Stall watchdog thresholds are FORBIDDEN to exceed. | Runtime watchdog + CTest `engine_perf_no_modal` | Test | CI fail: PERF-STALL-001 | Reduce stalls or move work off render/UI threads. | Enforces frame budget ceilings. |
| PERF-STALL-004 | Stall watchdog thresholds MUST NOT be exceeded. | Perf regression test | Test | CI fail: PERF-STALL-004 | Reduce stalls or move work off render/UI threads. | Enforces predictable frame budgets. |
| PERF-PROFILE-001 | PERF3 fixtures MUST emit telemetry and required metrics. | CTest `engine_perf_budget_fixture` + tools/ci/perf_budget_check.py | Test | CI fail: PERF-PROFILE-001 | Ensure profiling is enabled and metrics are recorded per lane. | Keeps telemetry consistent and parseable. |
| PERF-FID-005 | Forbidden fidelity degradation is FORBIDDEN. | Scenario tests + invariants | Test | CI fail: PERF-FID-005 | Use only approved degradation mechanisms. | Protects authoritative state integrity. |
| PERF-STREAM-001 | Streaming budgets MUST NOT be exceeded. | Runtime budget check | Test | CI fail: PERF-STREAM-001 | Reduce per-frame IO/decode/job costs. | Keeps streaming bounded. |
| PERF-BUDGET-001 | Tier performance budgets MUST NOT be exceeded. | PERF3 fixture regression | Test | CI fail: PERF-BUDGET-001 | Optimize hot paths or reduce workload. | Enforces tier targets. |
| PERF-BUDGET-002 | Tier performance budgets MUST NOT be exceeded. | tools/ci/perf_budget_check.py against PERF3 reports | Test | CI fail: PERF-BUDGET-002 | Optimize workloads or update PERF_BUDGETS.md thresholds with approval. | Prevents performance regression drift. |
| SCALE-SHARD-001 | Single-writer shard authority is REQUIRED. | Policy/spec lint (SCALE0) | Configure | CI fail: SCALE-SHARD-001 | Define shard authority domains with exactly one writer. | Prevents authority drift and nondeterminism. |
| SCALE-MSG-002 | Cross-shard interaction MUST use scheduled messages only. | Policy/spec lint (SCALE0) | Configure | CI fail: SCALE-MSG-002 | Use deterministic cross-shard messages with arrival_tick/order_key. | Eliminates hidden cross-shard access. |
| SCALE-CLOCK-003 | Per-shard clocks or drift are FORBIDDEN. | Policy/spec lint (SCALE0) | Configure | CI fail: SCALE-CLOCK-003 | Ensure all shards share ACT; pace via batching only. | Preserves determinism across shards. |
| SCALE-INT-001 | Macro/meso update paths MUST accept an InterestSet parameter. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: SCALE-INT-001 | Add dom_interest_set parameters and use them for iteration. | Enforces interest-driven processing. |
| SCALE-INT-002 | Camera/view-driven activation in authoritative code is FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: SCALE-INT-002 | Use explicit interest sources; do not activate simulation from camera/view state. | Prevents UI-driven simulation activation. |
| SCALE-FID-001 | Direct spawn/despawn/destroy patterns outside fidelity interfaces are FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: SCALE-FID-001 | Route lifecycle changes through dom_fidelity request/apply interfaces. | Prevents ad-hoc entity lifecycle changes. |
| SCALE-FID-002 | Ad-hoc approximation/LOD shortcuts in authoritative code are FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: SCALE-FID-002 | Use fidelity projection refine/collapse paths with provenance preservation. | Prevents non-provenanced simplification. |
| SCALE-INT-TEST-001 | Interest sets are deterministic, bounded, and hysteretic. | CTest `dominium_interest` | Test | CI fail: SCALE-INT-TEST-001 | Fix interest-set aggregation, ordering, or hysteresis policy. | Verifies interest set determinism and bounded processing. |
| SCALE-FID-TEST-001 | Fidelity transitions preserve provenance and continuity. | CTest `dominium_fidelity` | Test | CI fail: SCALE-FID-TEST-001 | Fix refine/collapse transitions and provenance preservation. | Verifies fidelity continuity and refusal rules. |
| DATA-SCHEMA-001 | Schema files missing required version metadata are FORBIDDEN. | `data_validate` CLI + `engine_data_validate` CTest | Configure | CI fail: DATA-SCHEMA-001 | Add schema_id, schema_version, and stability fields. | Prevents unversioned data formats. |
| DATA-SCHEMA-002 | Invalid schema version progression is FORBIDDEN. | `data_validate` CLI + `engine_data_validate` CTest | Configure | CI fail: DATA-SCHEMA-002 | Fix version bump rules or add migration/refusal. | Enforces semantic version law. |
| DATA-VALID-001 | Structural schema validation failure is FORBIDDEN. | `data_validate` CLI + `engine_data_validate` CTest | Configure | CI fail: DATA-VALID-001 | Fix structural errors (types/ranges/required fields). | Ensures load safety. |
| DATA-VALID-002 | Determinism/performance schema rule violation is FORBIDDEN. | `data_validate` CLI + `engine_data_validate` CTest | Configure | CI fail: DATA-VALID-002 | Remove nondeterministic or unbounded constructs. | Protects determinism and performance. |
| DATA-MIGRATE-001 | Missing migration for MAJOR schema bump is FORBIDDEN. | `data_validate` CLI + `engine_data_validate` CTest | Configure | CI fail: DATA-MIGRATE-001 | Add explicit version-to-version migration or refuse. | Prevents silent breaking changes. |
| PERF-NOMODAL-001 | Modal loading is FORBIDDEN. | Runtime trace + watchdog | Test | CI fail: PERF-NOMODAL-001 | Move work to async pipelines. | Eliminates blocking loads. |
| UI-BYPASS-001 | UI code reading authoritative world state is FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: UI-BYPASS-001 | Route UI through authorized projection layers. | Preserves epistemic separation. |
| EPIS-BYPASS-001 | UI includes authoritative headers are FORBIDDEN. | Static scan (tools/ci/arch_checks.py) + CTest `dominium_epistemic_ui_bypass` | Test | CI fail: EPIS-BYPASS-001 | Include EIL/capability snapshot headers only. | Blocks direct sim access from UI zones. |
| EPIS-API-002 | UI calls forbidden sim/world APIs are FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: EPIS-API-002 | Route UI access through EIL only. | Prevents authoritative queries from UI. |
| EPIS-CAP-003 | UI displays info without capability justification is FORBIDDEN. | CTest `dominium_epistemic` | Test | CI fail: EPIS-CAP-003 | Use capability snapshots and epistemic queries for UI output. | Ensures UI reflects epistemic state only. |
| BUILD-GLOBAL-001 | `include_directories()` or `link_directories()` usage is FORBIDDEN. | Configure-time check (`scripts/verify_cmake_no_global_includes.py`) + arch_checks (link_directories) | Configure | CI fail: BUILD-GLOBAL-001 | Use target-scoped include/link directories only. | Prevents global include leakage. |
| LIFE-SPEC-001 | LIFE continuity spec is required. | Documentation gate (manual audit) | Docs | Audit fail: LIFE-SPEC-001 | Add/update `schema/life/SPEC_LIFE_CONTINUITY.md`. | Establishes person/body/controller canon. |
| LIFE-SPEC-002 | LIFE death and estate spec is required. | Documentation gate (manual audit) | Docs | Audit fail: LIFE-SPEC-002 | Add/update `schema/life/SPEC_DEATH_AND_ESTATE.md`. | Ensures deterministic death and estate creation. |
| LIFE-SPEC-003 | LIFE control authority spec is required. | Documentation gate (manual audit) | Docs | Audit fail: LIFE-SPEC-003 | Add/update `schema/life/SPEC_CONTROL_AUTHORITY.md`. | Defines control delegation and authority resolution. |
| LIFE-SPEC-004 | LIFE continuation policies spec is required. | Documentation gate (manual audit) | Docs | Audit fail: LIFE-SPEC-004 | Add/update `schema/life/SPEC_CONTINUATION_POLICIES.md`. | Defines S1â€“S4 continuation and ability packages. |
| LIFE-SPEC-005 | LIFE birth/lineage overview spec is required. | Documentation gate (manual audit) | Docs | Audit fail: LIFE-SPEC-005 | Add/update `schema/life/SPEC_BIRTH_LINEAGE_OVERVIEW.md`. | Reserves lineage schema and constraints for LIFE3. |
| LIFE-CONT-DET-001 | Continuation candidate selection MUST be deterministic. | CTest `dominium_life_continuation` | Test | CI fail: LIFE-CONT-DET-001 | Use stable ordering and tie-breaks (`person_id`, reason priority). | Prevents divergence across peers. |
| LIFE-CONT-AUTH-001 | Continuation MUST enforce control authority rules. | CTest `dominium_life_continuation` | Test | CI fail: LIFE-CONT-AUTH-001 | Require authority records before transferring control. | Prevents unauthorized control transfer. |
| LIFE-CONT-NOFAB-001 | Continuation MUST NOT fabricate persons or bodies. | CTest `dominium_life_continuation` | Test | CI fail: LIFE-CONT-NOFAB-001 | Use pending actions and explicit construction pipelines only. | Enforces provenance and no-fabrication law. |
| LIFE-DEATH-DET-001 | Death pipeline produces deterministic estate records. | CTest `dominium_life_death` | Test | CI fail: LIFE-DEATH-DET-001 | Sort account IDs and use stable IDs for death events and estates. | Prevents nondeterministic estate ordering. |
| LIFE-LEDGER-001 | Death MUST NOT change ledger balances. | CTest `dominium_life_death` | Test | CI fail: LIFE-LEDGER-001 | Keep balances intact; only change ownership relations. | Preserves ledger conservation. |
| LIFE-INH-SCHED-001 | Inheritance scheduling MUST fire at exact ACT ticks. | CTest `dominium_life_death` | Test | CI fail: LIFE-INH-SCHED-001 | Use ACT-based claim periods and due-event scheduling only. | Ensures batch vs step equivalence. |
| LIFE-ESTATE-AUTH-001 | Estate resolution requires explicit executor authority. | CTest `dominium_life_death` | Test | CI fail: LIFE-ESTATE-AUTH-001 | Refuse resolution without authority; do not transfer assets. | Prevents unauthorized estate execution. |
| LIFE-EPIS-001 | Death knowledge is not omniscient. | CTest `dominium_life_death` | Test | CI fail: LIFE-EPIS-001 | Emit death notices via explicit epistemic hooks only. | Enforces epistemic boundary. |
| LIFE-REPLAY-001 | Death/estate replay equivalence MUST hold. | CTest `dominium_life_death` | Test | CI fail: LIFE-REPLAY-001 | Ensure deterministic IDs and ordering for death and estate records. | Keeps replay stable. |
| LIFE-BIRTH-DET-001 | Birth scheduling MUST be deterministic. | CTest `dominium_life_birth` | Test | CI fail: LIFE-BIRTH-DET-001 | Use ACT-based gestation ticks and deterministic scheduling. | Prevents divergence in birth timing. |
| LIFE-BIRTH-RES-001 | Births MUST enforce resource constraints. | CTest `dominium_life_birth` | Test | CI fail: LIFE-BIRTH-RES-001 | Require food/shelter constraints before scheduling gestation. | Prevents fabricated population growth. |
| LIFE-LINEAGE-DET-001 | Lineage records MUST be deterministic. | CTest `dominium_life_birth` | Test | CI fail: LIFE-LINEAGE-DET-001 | Sort parent IDs and preserve certainty flags deterministically. | Keeps lineage stable across peers. |
| LIFE-COHORT-001 | Cohort/micro birth integration MUST preserve counts. | CTest `dominium_life_birth` | Test | CI fail: LIFE-COHORT-001 | Update cohorts only in macro mode; preserve counts across refinement. | Prevents population drift. |
| LIFE-BIRTH-EPIS-001 | Birth knowledge is not omniscient. | CTest `dominium_life_birth` | Test | CI fail: LIFE-BIRTH-EPIS-001 | Emit birth notices via explicit epistemic hooks only. | Enforces epistemic boundary. |
| LIFE-BIRTH-BATCH-001 | Gestation completion MUST be batch vs step equivalent. | CTest `dominium_life_birth` | Test | CI fail: LIFE-BIRTH-BATCH-001 | Use due-event scheduler with deterministic ordering. | Preserves determinism under batching. |
| CIV0a-EVENT-001 | Cohort consumption MUST be scheduled via next_due_tick. | CTest `dominium_civ0a_survival` | Test | CI fail: CIV0a-EVENT-001 | Use due-event scheduling; no per-tick scans. | Enforces event-driven survival loop. |
| CIV0a-NOGLOB-001 | Global cohort iteration in survival is FORBIDDEN. | CTest `dominium_civ0a_survival` | Test | CI fail: CIV0a-NOGLOB-001 | Process only due cohorts via scheduler. | Prevents O(N) survival ticks. |
| MP0-PARITY-001 | Offline loopback must match authoritative outcomes. | CTest `dominium_mp0_parity` | Test | CI fail: MP0-PARITY-001 | Use loopback server-auth path; avoid singleplayer-only logic. | Ensures offline parity with MP. |
| MP0-LOCKSTEP-001 | Local lockstep peers must converge identically. | CTest `dominium_mp0_parity` | Test | CI fail: MP0-LOCKSTEP-001 | Ensure deterministic command ordering and simulation. | Prevents lockstep divergence. |
| MP0-SERVERAUTH-001 | Server-auth clients must accept authoritative state without divergence. | CTest `dominium_mp0_parity` | Test | CI fail: MP0-SERVERAUTH-001 | Keep clients non-authoritative and reconcile to server. | Preserves server authority. |
| LIFE-REM-DET-001 | Remains creation MUST be deterministic. | CTest `dominium_life_remains` | Test | CI fail: LIFE-REM-DET-001 | Ensure stable IDs/ordering for remains records. | Prevents post-death drift. |
| LIFE-REM-DECAY-001 | Remains decay MUST be batch vs step equivalent. | CTest `dominium_life_remains` | Test | CI fail: LIFE-REM-DECAY-001 | Use due-event scheduler with deterministic ordering. | Preserves decay determinism. |
| LIFE-REM-RIGHTS-001 | Salvage rights resolution order MUST be deterministic. | CTest `dominium_life_remains` | Test | CI fail: LIFE-REM-RIGHTS-001 | Apply contract > executor > jurisdiction > finder ordering only. | Enforces rights order. |
| LIFE-REM-LEDGER-001 | Salvage MUST conserve ledger balances. | CTest `dominium_life_remains` | Test | CI fail: LIFE-REM-LEDGER-001 | Use ledger transactions; no implicit transfer or balance changes. | Preserves ledger conservation. |
| LIFE-REM-EPIS-001 | Salvage MUST be epistemically gated. | CTest `dominium_life_remains` | Test | CI fail: LIFE-REM-EPIS-001 | Require explicit epistemic knowledge before salvage actions. | Prevents omniscient salvage. |
| LIFE-REM-COUNT-001 | Remains collapse/refine MUST preserve counts and provenance. | CTest `dominium_life_remains` | Test | CI fail: LIFE-REM-COUNT-001 | Preserve counts and provenance hashes across collapse/refine. | Prevents provenance loss. |

## Phase-1 Audit Notes (PH1-AUDIT)

- `tools/ci/arch_checks.py` is not invoked by `.github/workflows/ci.yml`. IDs that rely solely on this script are not CI-enforced without an explicit `check_arch` step.
- ID alias conflict: `DET-GATE-*` (docs/DETERMINISM_ENFORCEMENT.md) and `DET-G*` (docs/DETERMINISM_GATES.md) describe the same gates. Align to one canonical ID set.
- `docs/ARCH_BUILD_ENFORCEMENT.md` references `DET-FLOAT-001`, but the implemented check ID is `DET-FLOAT-003`.
- `BUILD-GLOBAL-001` is enforced for `include_directories()` at configure time; `link_directories()` is only covered by `tools/ci/arch_checks.py`.
- `PERF-STALL-004` and `PERF-BUDGET-001` duplicate `PERF-STALL-001` and `PERF-BUDGET-002` without implementation.
