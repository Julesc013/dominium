# CI Enforcement Matrix (ENF0)

This matrix defines mandatory, mechanical CI enforcement for architectural law.
All failures are merge-blocking.

Scope: canonical enforcement IDs for architecture, execution, reality, life, and civ.

## Invariants
- Enforcement IDs are binding and merge-blocking.
- New systems must add enforcement coverage.
- Refusal is valid when invariants are violated.

## Dependencies
- `docs/architecture/ARCH0_CONSTITUTION.md`
- `docs/architecture/INVARIANTS.md`

## Forbidden assumptions
- CI IDs are optional or informational only.
- Silent fallback is acceptable when checks fail.

## See also
- `docs/ci/FUTURE_ENFORCEMENT.md`

## Enforcement Table

| ID | Description | Enforcement Mechanism | Stage | Failure Mode | Remediation | Rationale |
| --- | --- | --- | --- | --- | --- | --- |
| ARCH-TOP-001 | Top-level `source/`, `src/`, `common_source/` are FORBIDDEN. | Repo layout lint (tools/ci/arch_checks.py) | Configure | CI fail: ARCH-TOP-001 | Remove or relocate the directory into a canonical top-level domain. | Prevents ambiguous ownership and drift. |
| ARCH-OWN-002 | `engine/` and `game/` responsibilities MUST NOT be merged. | Repo layout + target graph check | Configure | CI fail: ARCH-OWN-002 | Split responsibilities and restore separation between engine and game targets. | Preserves core layering and portability. |
| ARCH-DEP-001 | `engine/` MUST NOT reference or link `game/`, `launcher/`, `setup/`, or `tools/`. | Target graph rule + static scan (tools/ci/arch_checks.py) | Configure | CI fail: ARCH-DEP-001 | Remove forbidden references and use engine public APIs only. | Keeps engine as the dependency root. |
| ARCH-DEP-002 | `game/` MAY depend only on `engine/`. | Target graph rule in CMake | Configure | CI fail: ARCH-DEP-002 | Remove illegal dependencies and rewire through engine public APIs. | Maintains clear ownership of rules. |
| ARCH-DEP-003 | `client/` MAY depend only on `engine/` and `game/`. | Target graph rule in CMake | Configure | CI fail: ARCH-DEP-003 | Remove illegal dependencies and use engine/game public APIs. | Prevents client coupling to tools or setup. |
| ARCH-DEP-004 | `server/` MAY depend only on `engine/` and `game/`. | Target graph rule in CMake | Configure | CI fail: ARCH-DEP-004 | Remove illegal dependencies and use engine/game public APIs. | Keeps server authoritative and focused. |
| ARCH-DEP-005 | `tools/` MAY depend on `libs/contracts` and select `engine/` public APIs; MUST NOT depend on `game/`, `launcher/`, or `setup/`. | Target graph rule in CMake | Configure | CI fail: ARCH-DEP-005 | Remove illegal dependencies and use `libs/contracts` or engine public APIs only. | Avoids tool-to-runtime coupling. |
| ARCH-DEP-006 | `launcher/` MAY depend on `engine/` (public) + `libs/contracts`; `setup/` MAY depend only on `libs/contracts`. | Target graph rule in CMake | Configure | CI fail: ARCH-DEP-006 | Remove illegal dependencies and route through `libs/contracts` or engine public APIs only. | Keeps control-plane tools separate from runtime logic. |
| ARCH-INC-001 | `game/` includes from `engine/modules/**` or platform headers are FORBIDDEN. | Compile-time include guard + static scan (tools/ci/arch_checks.py) | Build | CI fail: ARCH-INC-001 | Replace with `engine/include/**` public headers; remove platform headers from game. | Enforces API boundaries. |
| ARCH-INC-002 | `client/`, `server/`, `tools/` include from `engine/modules/**` are FORBIDDEN. | Compile-time include guard + static scan (tools/ci/arch_checks.py) | Build | CI fail: ARCH-INC-002 | Replace with `engine/include/**` public headers. | Protects internal engine modules. |
| ARCH-INC-003 | Public headers MUST live in `engine/include/**` only. | CMake configure-time public-include assertion (`domino_engine`) | Configure | CI fail: ARCH-INC-003 | Move or re-export headers via `engine/include/**`. | Prevents accidental API exposure. |
| ARCH-RENDER-001 | Renderer-specific code outside `engine/render/**` is FORBIDDEN. | Path-based static scan (tools/ci/arch_checks.py) | Configure | CI fail: ARCH-RENDER-001 | Move code into `engine/render/**` and expose public API. | Centralizes renderer ownership. |
| ARCH-REN-002 | `game/` MUST NOT branch on graphics APIs. | Static scan for backend tokens | Configure | CI fail: ARCH-REN-002 | Move backend choice to engine render layer. | Keeps game logic renderer-agnostic. |
| ARCH-REN-003 | `client/` MUST NOT own renderer backends. | Target graph + path scan | Configure | CI fail: ARCH-REN-003 | Relocate backend code to `engine/render/**`. | Prevents client-only renderer forks. |
| REND-DIR-001 | Backend directories outside `engine/render/backends/**` are FORBIDDEN. | Path-based scan (future hook) | Configure | CI fail: REND-DIR-001 | Move backend code under `engine/render/backends/**`. | Enforces renderer ownership boundaries. |
| REND-DIR-002 | Capability-named backend folders are FORBIDDEN (`implicit/`, `legacy/`, etc.). | Path-based scan (future hook) | Configure | CI fail: REND-DIR-002 | Use renderer identity folders only. | Prevents capability-based layout drift. |
| REND-DIR-003 | Version bucket folders are FORBIDDEN (`gl2_3/`, `metal3_4/`, etc.). | Path-based scan (future hook) | Configure | CI fail: REND-DIR-003 | Encode versions via RenderCaps, not folders. | Keeps folder identity stable. |
| REND-API-001 | `game/` references backend headers or API types are FORBIDDEN. | Static scan (future hook) | Configure | CI fail: REND-API-001 | Route through engine render API only. | Preserves engine/game boundary. |
| REND-LEG-001 | Fixed-function backends MUST NOT modify core contracts. | Forbidden-include scan (future hook) | Configure | CI fail: REND-LEG-001 | Keep legacy backends as sinks only. | Prevents legacy-driven abstraction creep. |
| REND-FEAT-001 | Feature modules missing requires/fallback/cost are FORBIDDEN. | Feature validator (future hook) | Configure | CI fail: REND-FEAT-001 | Add required declarations. | Enforces scalable content. |
| REND-DET-001 | Renderer writes to authoritative state or hashes are FORBIDDEN. | Determinism test (future hook) | Test | CI fail: REND-DET-001 | Remove render feedback into sim state. | Protects determinism. |
| ARCH-SETUP-001 | `launcher/` or `setup/` depending on engine internals is FORBIDDEN. | Target graph rule in CMake | Configure | CI fail: ARCH-SETUP-001 | Remove the dependency and use `libs/` or `schema/`. | Avoids coupling operational tools to runtime. |
| ARCH0-DOC-001 | ARCH0 constitution, glossary, and change protocol docs are REQUIRED. | Documentation lint (future hook) | Docs | CI fail: ARCH0-DOC-001 | Add/restore `docs/architecture/ARCH0_CONSTITUTION.md`, `docs/architecture/GLOSSARY.md`, `docs/architecture/CHANGE_PROTOCOL.md`. | Guarantees ARCH0 baseline is present. |
| ARCH0-READ-002 | `CONTRIBUTING.md` must reference ARCH0 constitution, glossary, and change protocol. | Documentation lint (future hook) | Docs | CI fail: ARCH0-READ-002 | Add ARCH0 references to `CONTRIBUTING.md`. | Makes ARCH0 required reading for contributors. |
| ARCH0-PROMPT-003 | Prompt templates must reference `docs/architecture/ARCH0_CONSTITUTION.md`. | Prompt lint (future hook) | Docs | CI fail: ARCH0-PROMPT-003 | Add ARCH0 references to prompt templates. | Binds future prompts to ARCH0. |
| CANON0-MAP-001 | New systems must update `docs/architecture/CANONICAL_SYSTEM_MAP.md`. | Documentation lint (future hook) | Docs | CI fail: CANON0-MAP-001 | Update the system map with new system families and dependency edges. | Prevents silent dependency drift. |
| CANON0-INV-002 | New system specs must cite relevant invariants. | Documentation lint (future hook) | Docs | CI fail: CANON0-INV-002 | Reference `docs/architecture/INVARIANTS.md` and list enforcement points. | Keeps invariants visible during design. |
| CANON0-BREAK-003 | Breaking an invariant requires an explicit design prompt and change protocol. | Manual audit + change protocol gate | Docs | Audit fail: CANON0-BREAK-003 | Provide the design prompt, rationale, and update `docs/architecture/INVARIANTS.md`. | Forces explicit governance for exceptions. |
| CANON0-ARCH-004 | Architectural changes require CANON review sign-off. | Manual audit (CANON review) | Docs | Audit fail: CANON0-ARCH-004 | Record CANON review and update canonical docs. | Prevents architectural drift. |
| REALITY0-NO-FAKE-001 | Systems must not fabricate visitable worlds without refinement. | Contract tests + admission checks (future hook) | Test | CI fail: REALITY0-NO-FAKE-001 | Require refinement contracts and deny placeholder micro worlds. | Prevents fake visitable worlds. |
| REALITY0-NO-TELEPORT-002 | No movement outside the Travel Graph. | Static scan + admission tests (future hook) | Configure | CI fail: REALITY0-NO-TELEPORT-002 | Route all movement through travel graph and scheduling. | Enforces scheduled, explicit movement. |
| REALITY0-AUTH-003 | No authority bypass without explicit effect + audit. | Admission conformance tests (future hook) | Test | CI fail: REALITY0-AUTH-003 | Require law-gated effects and audit trails for privileged actions. | Prevents silent authority bypass. |
| EXEC0-IR-001 | Sim-affecting systems MUST emit Work IR. | Work IR conformance scan (future hook) | Configure | CI fail: EXEC0-IR-001 | Emit Work IR for all authoritative systems. | Enforces EXEC0 execution substrate. |
| EXEC0-IR-002 | All Work IR tasks MUST reference an AccessSet. | Work IR validator (future hook) | Configure | CI fail: EXEC0-IR-002 | Add AccessSet references to every TaskNode. | Prevents undeclared access. |
| EXEC0-IR-003 | All reductions MUST declare deterministic operators. | Access IR validator (future hook) | Configure | CI fail: EXEC0-IR-003 | Declare deterministic reduction_op for each reduction. | Preserves deterministic reduction semantics. |
| EXEC0-LAW-001 | All tasks MUST declare law_targets. | Work IR validator (future hook) | Configure | CI fail: EXEC0-LAW-001 | Add law_targets to every TaskNode. | Enforces law-gated execution. |
| EXEC0-ABSENCE-001 | Disabling a system MUST NOT crash simulation. | Null-system fixture suite (future hook) | Test | CI fail: EXEC0-ABSENCE-001 | Fix system absence paths and refusal logic. | Guarantees absence safety. |
| EXEC0b-REORDER-001 | Scheduler MUST NOT violate determinism class rules. | Policy lint + conformance tests (future hook) | Docs | CI fail: EXEC0b-REORDER-001 | Align scheduling with `EXECUTION_REORDERING_POLICY.md`. | Prevents nondeterministic reordering. |
| EXEC0b-REDUCE-001 | Authoritative reductions MUST use deterministic operator and fixed-tree method. | Access IR validator (future hook) | Docs | CI fail: EXEC0b-REDUCE-001 | Use operators and fixed-tree reduction in `DETERMINISTIC_REDUCTION_RULES.md`. | Preserves deterministic reduction semantics. |
| EXEC0b-COMMIT-001 | Parallel execution MUST commit in stable order. | Policy lint + conformance tests (future hook) | Docs | CI fail: EXEC0b-COMMIT-001 | Apply stable commit ordering key for all writes. | Prevents nondeterministic commit order. |
| EXEC0b-SPEC-001 | Speculation is limited to DERIVED tasks. | Policy lint + derived-task scan (future hook) | Docs | CI fail: EXEC0b-SPEC-001 | Restrict speculative work to DERIVED tasks only. | Blocks authoritative speculation. |
| LAW-SCHEMA-001 | Law kernel specs and target registries MUST be versioned. | Schema lint (future hook) | Docs | CI fail: LAW-SCHEMA-001 | Add Schema ID/version metadata to law specs and registries. | Ensures law governance is versioned. |
| EXEC0c-LAW-REQ-001 | All AUTHORITATIVE tasks MUST declare law_targets. | Work IR validator (future hook) | Configure | CI fail: EXEC0c-LAW-REQ-001 | Declare law_targets on every authoritative TaskNode. | Enforces law-gated execution. |
| EXEC0c-GATE-001 | Command admission MUST call law gate. | Admission conformance tests (future hook) | Test | CI fail: EXEC0c-GATE-001 | Route CommandIntent through law kernel before scheduling. | Prevents ungated command execution. |
| EXEC0c-GATE-002 | Task admission MUST call law gate. | Admission conformance tests (future hook) | Test | CI fail: EXEC0c-GATE-002 | Invoke law kernel before task execution. | Prevents ungated task execution. |
| EXEC0c-GATE-003 | Information emission MUST call law gate. | Epistemic conformance tests (future hook) | Test | CI fail: EXEC0c-GATE-003 | Gate UI/tool emission via law kernel. | Prevents unauthorized information release. |
| EXIST0-STATE-001 | All entities/domains must declare existence_state. | Schema lint (future hook) | Docs | CI fail: EXIST0-STATE-001 | Declare explicit existence_state for all relevant schemas. | Prevents implicit or inferred existence. |
| EXIST0-NOPOP-002 | No code may fabricate existence implicitly. | Static scan + audit tests (future hook) | Configure | CI fail: EXIST0-NOPOP-002 | Add explicit existence transitions and audit hooks. | Blocks pop-in creation. |
| EXIST0-ARCHIVE-003 | Archived objects are read-only unless forked. | Contract tests (future hook) | Test | CI fail: EXIST0-ARCHIVE-003 | Enforce archive read-only and fork-only mutation paths. | Preserves archival truth. |
| EXIST1-CONTRACT-001 | Any REFINABLE subject type must have a refinement contract schema entry. | Schema lint (future hook) | Docs | CI fail: EXIST1-CONTRACT-001 | Add refinement contract entries for all refinable subjects. | Ensures visitability is contract-backed. |
| EXIST1-COLLAPSE-002 | Any REALIZED subject type must define collapse mapping. | Schema lint (future hook) | Docs | CI fail: EXIST1-COLLAPSE-002 | Add collapse contract entries for all realized subjects. | Prevents silent disappearance on collapse. |
| EXIST1-NOFAB-003 | Refinement may not create objects lacking provenance refs. | Contract tests (future hook) | Test | CI fail: EXIST1-NOFAB-003 | Require provenance references on refined outputs. | Blocks fabricated micro state. |
| EXIST1-OBSERVED-004 | Refinement must not contradict observed history. | Contract tests (future hook) | Test | CI fail: EXIST1-OBSERVED-004 | Enforce observed-history constraints in refinement. | Preserves player-visible truth. |
| EXIST2-FREEZE-001 | Frozen subjects must reject mutation attempts. | Contract tests (future hook) | Test | CI fail: EXIST2-FREEZE-001 | Enforce freeze guards on mutation paths. | Preserves frozen truth. |
| EXIST2-FORK-002 | Forking must preserve parent snapshot intact. | Contract tests (future hook) | Test | CI fail: EXIST2-FORK-002 | Require fork to keep parent immutable with provenance pointer. | Prevents silent history edits. |
| EXIST2-NOERASE-003 | No code path may delete state without archival record. | Static scan + audit tests (future hook) | Configure | CI fail: EXIST2-NOERASE-003 | Replace deletions with destruction effects and tombstones. | Blocks silent erasure. |
| DOMAIN0-RUNTIME-001 | All domain checks must go through domain API. | Static scan for domain queries (future hook) | Configure | CI fail: DOMAIN0-RUNTIME-001 | Route spatial checks through domain volume queries. | Enforces domain boundary ownership. |
| DOMAIN0-NOSPECIAL-002 | No system may assume rectangular bounds. | Static scan for AABB-only checks (future hook) | Configure | CI fail: DOMAIN0-NOSPECIAL-002 | Replace AABB-only logic with SDF-backed domain queries. | Blocks hard-coded world boxes. |
| DOMAIN0-BAKE-003 | Authoring formats must bake to SDF with versioned parameters. | Schema lint + bake pipeline check (future hook) | Docs | CI fail: DOMAIN0-BAKE-003 | Require SDF bake metadata with explicit versioned parameters. | Ensures deterministic authoring conversion. |
| DOMAIN2-SCHEMA-001 | Domain jurisdictions and precedence specs must exist. | Schema lint (future hook) | Docs | CI fail: DOMAIN2-SCHEMA-001 | Add `schema/law/SPEC_DOMAIN_JURISDICTIONS.md` and `SPEC_JURISDICTION_PRECEDENCE.md`. | Ensures law bindings are schema-defined. |
| DOMAIN2-RESOLVE-002 | Jurisdiction resolution tests must pass. | CTest `jurisdiction_domain` | Test | CI fail: DOMAIN2-RESOLVE-002 | Fix deterministic jurisdiction resolution for nested/overlap/path cases. | Enforces spatial law determinism. |
| DOMAIN2-SPACE-003 | Law resolution must use domain context. | Static scan + admission tests (future hook) | Configure | CI fail: DOMAIN2-SPACE-003 | Route law gating through domain jurisdiction resolver. | Prevents spatial ambiguity. |
| DOMAIN3-SHARD-001 | Domain shard partitioning must be deterministic. | CTest `dominium_server_domain_shard_partition` | Test | CI fail: DOMAIN3-SHARD-001 | Fix shard mapping determinism or seed usage. | Ensures stable shard ownership by domain. |
| DOMAIN3-OWN-002 | Domain shard ownership must be exclusive. | CTest `dominium_server_domain_shard_partition` | Test | CI fail: DOMAIN3-OWN-002 | Ensure no overlapping authoritative assignments. | Prevents cross-shard authoritative overlap. |
| DOMAIN3-STREAM-003 | Streaming must be restricted to active domains. | CTest `dominium_server_domain_shard_partition` | Test | CI fail: DOMAIN3-STREAM-003 | Enforce archival/existence gating of streaming. | Prevents streaming outside allowed domains. |
| DOMAIN4-VISIT-001 | Visitability contract tests must pass. | CTest `visitability_contract` | Test | CI fail: DOMAIN4-VISIT-001 | Fix visitability gating for reachability/contract/budget rules. | Ensures visitability is enforced. |
| DOMAIN4-NOFAKE-002 | Visitable targets must have refinement contracts. | CTest `visitability_contract` | Test | CI fail: DOMAIN4-NOFAKE-002 | Refuse visits lacking refinement contracts. | Prevents fake worlds. |
| DOMAIN4-ARCHIVE-003 | Archived/frozen domains are unreachable unless forked. | CTest `visitability_contract` | Test | CI fail: DOMAIN4-ARCHIVE-003 | Require fork or refuse archived/frozen visits. | Preserves archival integrity. |
| TRAVEL0-NO-TELEPORT-001 | All movement must go through Travel Graph. | Static scan + admission tests (future hook) | Configure | CI fail: TRAVEL0-NO-TELEPORT-001 | Route movement through travel graph and scheduling. | Prevents implicit teleportation. |
| TRAVEL0-EDGE-002 | Exotic travel must be declared as edges. | Schema lint (future hook) | Docs | CI fail: TRAVEL0-EDGE-002 | Declare portals/wormholes/hyperlanes as travel edges. | Normalizes exotic travel. |
| TRAVEL0-SCHEDULE-003 | Travel must be scheduled on ACT. | Admission conformance tests (future hook) | Test | CI fail: TRAVEL0-SCHEDULE-003 | Emit scheduled travel effects for movement. | Enforces scheduled movement. |
| TRAVEL1-CAP-001 | All travel edges must declare capacity_type. | Schema lint (future hook) | Docs | CI fail: TRAVEL1-CAP-001 | Add capacity_type to travel edges. | Ensures capacity is explicit. |
| TRAVEL1-COST-002 | All travel edges must declare cost model (even if zero). | Schema lint (future hook) | Docs | CI fail: TRAVEL1-COST-002 | Add cost model to travel edges. | Prevents free/implicit travel costs. |
| TRAVEL1-QUEUE-003 | Queueing behavior must be deterministic. | Policy lint + conformance tests (future hook) | Test | CI fail: TRAVEL1-QUEUE-003 | Apply deterministic queue ordering and dequeue rules. | Prevents nondeterministic congestion. |
| TRAVEL2-NO-MAGIC-001 | No code path may teleport without a TravelEdge. | Static scan + admission tests (future hook) | Configure | CI fail: TRAVEL2-NO-MAGIC-001 | Route exotic movement through travel edges and scheduling. | Blocks magic teleports. |
| TRAVEL2-ZERO-EXPLICIT-002 | Zero-time travel must be explicitly declared. | Schema lint (future hook) | Docs | CI fail: TRAVEL2-ZERO-EXPLICIT-002 | Declare zero traversal_time on edges. | Prevents implicit instant travel. |
| TRAVEL2-EDGE-003 | All portals/wormholes/hyperlanes must be schema-defined. | Schema lint (future hook) | Docs | CI fail: TRAVEL2-EDGE-003 | Add exotic edge definitions to travel schema. | Enforces explicit exotic travel. |
| TIME2-NO-ACT-WARP-001 | No code may modify ACT for gameplay pacing. | Static scan + determinism tests (future hook) | Test | CI fail: TIME2-NO-ACT-WARP-001 | Remove ACT mutation; use observer clocks. | Preserves authoritative time. |
| TIME2-DERIVED-ONLY-002 | Observer clocks must not affect authoritative scheduling. | Policy lint + admission tests (future hook) | Configure | CI fail: TIME2-DERIVED-ONLY-002 | Keep observer clocks derived-only. | Prevents perception from altering truth. |
| TIME3-NO-FUTURE-LEAK-001 | No perception buffer may expose unauthorized future ACT. | Policy lint + audit tests (future hook) | Test | CI fail: TIME3-NO-FUTURE-LEAK-001 | Clamp buffers to allowed windows. | Prevents future leakage. |
| TIME3-READONLY-002 | Replay buffers must be read-only without explicit authority. | Admission conformance tests (future hook) | Test | CI fail: TIME3-READONLY-002 | Block mutations from replay buffers without authority. | Preserves audit integrity. |
| OMNI0-NO-ISADMIN-001 | No code may check isAdmin/isCheat flags. | Static scan (future hook) | Configure | CI fail: OMNI0-NO-ISADMIN-001 | Remove admin/cheat flag checks; use capabilities. | Enforces capability-only authority. |
| OMNI0-CAP-REQ-002 | All powerful actions must declare capability requirements. | Admission conformance tests (future hook) | Test | CI fail: OMNI0-CAP-REQ-002 | Declare capability targets for privileged intents. | Ensures explicit authority. |
| OMNI0-NOBYPASS-003 | All overrides must be effects, not direct mutation. | Static scan + audit tests (future hook) | Test | CI fail: OMNI0-NOBYPASS-003 | Route overrides through explicit effects. | Prevents silent admin mutation. |
| OMNI0-NOMODE-004 | No code may branch on hard-coded game modes or authority flags. | Static scan (future hook) | Configure | CI fail: OMNI0-NOMODE-004 | Remove mode checks; use capability profiles. | Eliminates mode-specific authority. |
| OMNI0-DOC-005 | Authority and capability specs must exist. | Documentation gate (manual audit) | Docs | Audit fail: OMNI0-DOC-005 | Add/update `schema/authority/**` and `schema/capabilities/**` specs. | Ensures OMNI0 schema baseline. |
| OMNI1-NOTOOLBYPASS-001 | No code may mutate state outside ToolIntents for dev/admin actions. | Static scan + audit tests (future hook) | Test | CI fail: OMNI1-NOTOOLBYPASS-001 | Route dev/admin actions through ToolIntents and effects. | Prevents hidden tool bypasses. |
| OMNI1-CAP-REQ-002 | All tool actions must declare capability requirements. | Admission conformance tests (future hook) | Test | CI fail: OMNI1-CAP-REQ-002 | Declare tool capability requirements for ToolIntents. | Ensures explicit tool authority. |
| OMNI1-AUDIT-003 | Tool actions must emit audit entries. | Audit conformance tests (future hook) | Test | CI fail: OMNI1-AUDIT-003 | Emit ToolIntent audit records for accept/refuse. | Guarantees tool traceability. |
| OMNI2-NOSILENT-001 | All refusals must emit refusal object. | Admission conformance tests (future hook) | Test | CI fail: OMNI2-NOSILENT-001 | Emit refusal records with codes, scope, and explanation class. | Prevents silent refusals. |
| OMNI2-NOPUNISH-002 | No enforcement without explicit action effect. | Static scan + audit tests (future hook) | Test | CI fail: OMNI2-NOPUNISH-002 | Use enforcement actions for disconnect/throttle/revoke. | Prevents hidden punishments. |
| OMNI2-NOCHEATHOOK-003 | No anti-cheat logic outside law evaluation. | Static scan (future hook) | Configure | CI fail: OMNI2-NOCHEATHOOK-003 | Move integrity checks into law evaluation inputs. | Prevents ad-hoc cheat detection. |
| HWCAPS0-SCHEMA-001 | SysCaps schema version present and validated. | Schema lint (future hook) | Docs | CI fail: HWCAPS0-SCHEMA-001 | Add SysCaps schema version and field definitions. | Ensures SysCaps format is versioned. |
| HWCAPS0-POLICY-DET-001 | Policy selection deterministic tests must pass. | CTest `execution_policy` | Test | CI fail: HWCAPS0-POLICY-DET-001 | Fix policy selection determinism in execution policy tests. | Prevents nondeterministic backend selection. |
| HWCAPS0-NOAUTHGPU-001 | GPU backend cannot be selected for authoritative tasks. | CTest `execution_policy` | Test | CI fail: HWCAPS0-NOAUTHGPU-001 | Enforce strict CPU-only kernel policy for authoritative tasks. | Blocks authoritative GPU divergence. |
| HWCAPS0-FALLBACK-001 | scalar + exec2 fallback always available. | CTest `execution_policy` | Test | CI fail: HWCAPS0-FALLBACK-001 | Ensure exec2 and scalar kernels remain valid fallbacks. | Guarantees minimum deterministic fallback. |
| HWCAPS0-LAW-OVERRIDE-001 | Law constraints override profile. | CTest `execution_policy` | Test | CI fail: HWCAPS0-LAW-OVERRIDE-001 | Apply law gating after profile preferences. | Ensures governance overrides policy. |
| EXEC4-EMIT-001 | Game systems MUST emit Work IR via the system registry (no direct execution). | Static scan + registry conformance test (future hook) | Configure | CI fail: EXEC4-EMIT-001 | Route system updates through Work IR emission. | Enforces EXEC4 emission contract. |
| EXEC4-NOEXEC-002 | Game systems MUST NOT call scheduler backends or execute tasks directly. | Static scan for scheduler symbols (future hook) | Configure | CI fail: EXEC4-NOEXEC-002 | Remove scheduler calls; emit tasks instead. | Keeps game backend-agnostic. |
| EXEC4-ACCESS-003 | Emitted tasks MUST reference an AccessSet. | Work IR validator (future hook) | Configure | CI fail: EXEC4-ACCESS-003 | Add AccessSet references for all tasks. | Prevents undeclared access. |
| EXEC-AUDIT0-BYPASS-001 | Game MUST NOT include scheduler backends, engine/modules headers, or spawn threads. | Static scan (`scripts/ci/check_execution_contracts.py`) | Configure | CI fail: EXEC-AUDIT0-BYPASS-001 | Remove forbidden includes/calls; use engine public APIs only. | Blocks execution bypasses. |
| EXEC-AUDIT0-IR-REQ-002 | TaskNodes MUST set determinism_class, AccessSet, CostModel, phase_id, and commit_key. | CTest `execution_contract` + Work IR completeness test | Test | CI fail: EXEC-AUDIT0-IR-REQ-002 | Fill required TaskNode fields at emission time. | Enforces Work IR completeness. |
| EXEC-AUDIT0-LAW-REQ-003 | Scheduler MUST invoke law admission before execution. | CTest `execution_contract` | Test | CI fail: EXEC-AUDIT0-LAW-REQ-003 | Route all task admission through law evaluation. | Prevents ungated execution. |
| EXEC-AUDIT0-ACCESS-REQ-004 | AccessSet conflicts MUST be detected and Work IR must declare access. | CTest `execution_contract` + CTest `dominium_work_ir_completeness` | Test | CI fail: EXEC-AUDIT0-ACCESS-REQ-004 | Declare AccessSets and resolve conflicts deterministically. | Prevents undeclared access and conflicts. |
| EXEC-AUDIT1-FIX-001 | Canonical regression fixtures MUST exist. | Repo layout lint (future hook) | Configure | CI fail: EXEC-AUDIT1-FIX-001 | Add missing fixture folders under `game/tests/fixtures/`. | Ensures deterministic fixture availability. |
| EXEC-AUDIT1-DET-002 | Determinism regression suite must pass for fixtures. | CTest `execution_perf_regression` | Test | CI fail: EXEC-AUDIT1-DET-002 | Fix step/batch/EXEC2/EXEC3 determinism for fixtures. | Prevents determinism regressions. |
| EXEC-AUDIT1-PERF-003 | Performance budgets must hold for fixtures. | CTest `execution_perf_regression` | Test | CI fail: EXEC-AUDIT1-PERF-003 | Reduce workload cost or adjust budgets via change protocol. | Blocks silent perf drift. |
| EXEC-AUDIT1-DEGRADE-004 | Budget pressure must trigger deterministic degradation. | CTest `execution_perf_regression` | Test | CI fail: EXEC-AUDIT1-DEGRADE-004 | Fix deterministic degradation behavior. | Preserves graceful degradation. |
| EXEC-AUDIT1-SHARD-005 | Sharded vs unsharded regression hashes must match. | CTest `dominium_server_shard_regression` | Test | CI fail: EXEC-AUDIT1-SHARD-005 | Fix shard placement or message ordering. | Preserves shard determinism. |
| ADOPT3-IR-001 | Interest system MUST be IR-only. | Static scan for legacy interest loops (future hook) | Configure | CI fail: ADOPT3-IR-001 | Remove legacy interest execution paths. | Enforces authoritative Work IR adoption. |
| ADOPT3-ACCESS-002 | Interest tasks MUST declare AccessSets. | Work IR validator (future hook) | Configure | CI fail: ADOPT3-ACCESS-002 | Add AccessSet references to all interest tasks. | Prevents undeclared interest access. |
| ADOPT3-LEGACY-003 | Legacy interest loops are FORBIDDEN. | Static scan for legacy interest patterns (future hook) | Configure | CI fail: ADOPT3-LEGACY-003 | Remove legacy loops and use Work IR tasks. | Blocks hidden bypass paths. |
| ADOPT4-IR-001 | Economy and governance systems MUST be IR-only. | Static scan for macro tick loops (future hook) | Configure | CI fail: ADOPT4-IR-001 | Remove legacy macro execution paths. | Enforces authoritative macro Work IR adoption. |
| ADOPT4-ACCESS-002 | Economy/governance tasks MUST declare AccessSets. | Work IR validator (future hook) | Configure | CI fail: ADOPT4-ACCESS-002 | Add AccessSet references to all macro tasks. | Prevents undeclared macro access. |
| ADOPT4-LEGACY-003 | Legacy economy/governance loops are FORBIDDEN. | Static scan for macro loop patterns (future hook) | Configure | CI fail: ADOPT4-LEGACY-003 | Remove legacy loops and use Work IR tasks. | Blocks hidden bypass paths. |
| ADOPT5-IR-001 | War system MUST be IR-only. | Static scan for war tick loops (future hook) | Configure | CI fail: ADOPT5-IR-001 | Remove legacy war execution paths. | Enforces war Work IR adoption. |
| ADOPT5-ACCESS-002 | War tasks MUST declare AccessSets. | Work IR validator (future hook) | Configure | CI fail: ADOPT5-ACCESS-002 | Add AccessSet references to all war tasks. | Prevents undeclared war access. |
| ADOPT5-LAW-003 | Engagements MUST be law-gated. | Law admission tests (future hook) | Test | CI fail: ADOPT5-LAW-003 | Route engagements through law kernel. | Enforces war legality gates. |
| ADOPT5-LEGACY-004 | Legacy combat ticks are FORBIDDEN. | Static scan for combat tick loops (future hook) | Configure | CI fail: ADOPT5-LEGACY-004 | Remove combat tick loops and use Work IR tasks. | Blocks hidden war bypass paths. |
| ADOPT6-IR-001 | Agent system MUST be IR-only. | Static scan for agent execution loops (future hook) | Configure | CI fail: ADOPT6-IR-001 | Remove legacy agent execution paths. | Enforces agent Work IR adoption. |
| ADOPT6-ACCESS-002 | Agent tasks MUST declare AccessSets. | Work IR validator (future hook) | Configure | CI fail: ADOPT6-ACCESS-002 | Add AccessSet references to all agent tasks. | Prevents undeclared agent access. |
| ADOPT6-LEGACY-003 | Agent per-tick loops are FORBIDDEN. | Static scan for agent tick loops (future hook) | Configure | CI fail: ADOPT6-LEGACY-003 | Remove per-tick agent loops and use Work IR tasks. | Blocks hidden agent bypass paths. |
| DIST0-SHARD-001 | Shard model and ownership specs MUST exist. | Documentation lint (future hook) | Docs | CI fail: DIST0-SHARD-001 | Add `schema/distribution/README.md` and shard specs. | Establishes deterministic shard model. |
| DIST0-PLACE-002 | Task placement MUST be deterministic and ownership-based. | Placement policy lint (future hook) | Configure | CI fail: DIST0-PLACE-002 | Use shard ownership rules for authoritative tasks. | Prevents nondeterministic placement. |
| DIST0-MSG-003 | Cross-shard interactions MUST use messages with arrival ticks. | Message schema lint (future hook) | Configure | CI fail: DIST0-MSG-003 | Route cross-shard effects through messages only. | Preserves causal ordering. |
| DIST0-READ-004 | Synchronous cross-shard reads are FORBIDDEN. | Static scan + runtime guard (future hook) | Test | CI fail: DIST0-READ-004 | Refuse cross-shard reads and use messages. | Prevents nondeterministic state access. |
| ECSX0-FIELDID-001 | Field ID reuse is FORBIDDEN. | Schema registry lint (future hook) | Docs | CI fail: ECSX0-FIELDID-001 | Assign new field_id; never reuse deprecated IDs. | Preserves field meaning across versions. |
| ECSX0-SCHEMA-001 | Every component MUST declare owner and version. | Schema lint (future hook) | Docs | CI fail: ECSX0-SCHEMA-001 | Add owner/version to component schema. | Enforces ownership and versioning. |
| ECSX0-DET-001 | Authoritative fields MUST be fixed-point or integer types only. | Schema lint (future hook) | Docs | CI fail: ECSX0-DET-001 | Convert to fixed-point/integer or mark derived. | Preserves deterministic state. |
| ECSX0-PACK-001 | Compiler-dependent packing declarations are FORBIDDEN. | Schema + code scan (future hook) | Docs | CI fail: ECSX0-PACK-001 | Use explicit packing rules only. | Prevents platform-dependent layout. |
| DET-FLOAT-003 | Floating point usage or math headers in authoritative zones are FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: DET-FLOAT-003 | Replace with deterministic fixed-point or approved math. | Prevents nondeterministic math. |
| DET-TIME-001 | OS time APIs in authoritative zones are FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: DET-TIME-001 | Use ACT time and deterministic scheduling only. | Eliminates wall-clock variance. |
| DET-RNG-002 | Non-deterministic RNG in authoritative zones is FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: DET-RNG-002 | Use engine deterministic RNG only. | Ensures replayable randomness. |
| DET-ORD-004 | Unordered container iteration without normalization is FORBIDDEN. | Lint + static scan (tools/ci/arch_checks.py) | Configure | CI fail: DET-ORD-004 | Normalize ordering or use ordered containers. | Removes hash-order variance. |
| DET-ORDER-TEST-001 | Event queue ordering is deterministic under permuted insertions. | CTest `engine_det_order` | Test | CI fail: DET-ORDER-TEST-001 | Fix event queue ordering or tie-break keys. | Prevents event scheduling drift. |
| DET-ORDER-TEST-002 | Ledger obligation ordering is deterministic under permuted insertions. | CTest `engine_det_order` | Test | CI fail: DET-ORDER-TEST-002 | Ensure obligation order key uses stable IDs. | Preserves ledger determinism. |
| DET-ORDER-TEST-003 | Interest set ordering is deterministic under permuted insertions. | CTest `engine_det_order` | Test | CI fail: DET-ORDER-TEST-003 | Normalize interest volumes by canonical keys. | Preserves interest-set determinism. |
| DET-THREAD-005 | Nondeterministic shared mutable state is FORBIDDEN. | Threading lint + race-focused tests | Test | CI fail: DET-THREAD-005 | Add deterministic scheduling or remove shared writes. | Prevents race-driven divergence. |
| DET-GATE-STEP-001 | Step vs batch equivalence MUST hold. | Determinism test suite | Test | CI fail: DET-GATE-STEP-001 | Fix update order or accumulation errors. | Ensures execution-mode equivalence. |
| DET-GATE-REPLAY-002 | Replay equivalence MUST hold. | Replay determinism suite | Test | CI fail: DET-GATE-REPLAY-002 | Remove nondeterministic inputs or ordering. | Protects replay and auditability. |
| DET-GATE-LOCKSTEP-003 | Lockstep vs server-auth equivalence MUST hold. | Network determinism suite | Test | CI fail: DET-GATE-LOCKSTEP-003 | Align authoritative rules and client prediction. | Maintains network determinism. |
| DET-GATE-HASH-004 | Hash partition invariance MUST hold. | Shard invariance suite | Test | CI fail: DET-GATE-HASH-004 | Normalize partition ordering and hash inputs. | Preserves sharding correctness. |
| DET-EXC-006 | Determinism exceptions are FORBIDDEN. | Policy scan for exception tags | Configure | CI fail: DET-EXC-006 | Remove the exception and fix root determinism issue. | Prevents erosion of determinism law. |
| DET-G1 | Step vs batch equivalence MUST hold. | Determinism suite (DET0 matrix) | Test | CI fail: DET-G1 | Fix update order or batch stepping logic. | Ensures step and batch equivalence. |
| DET-G2 | Replay equivalence MUST hold. | Replay determinism suite (DET0 matrix) | Test | CI fail: DET-G2 | Fix nondeterministic inputs or ordering. | Protects replay fidelity. |
| DET-G3 | Lockstep parity MUST hold. | Lockstep determinism suite (DET0 matrix) | Test | CI fail: DET-G3 | Align peer ordering and sync rules. | Preserves lockstep convergence. |
| DET-G4 | Server-auth parity MUST hold. | Server-auth determinism suite (DET0 matrix) | Test | CI fail: DET-G4 | Fix authoritative state divergence. | Preserves server authority. |
| DET-G5 | No float/OS time/nondeterministic RNG in authoritative dirs. | Static scan + compile checks | Configure | CI fail: DET-G5 | Remove forbidden constructs in authoritative paths. | Prevents nondeterministic inputs. |
| DET-G6 | Canonical ordering under permuted insertions MUST hold. | Ordering invariance suite | Test | CI fail: DET-G6 | Normalize container ordering. | Prevents order-dependent divergence. |
| PERF-GLOBAL-002 | Global iteration in runtime update paths is FORBIDDEN. | Lint (tools/ci/arch_checks.py) + fixture test | Test | CI fail: PERF-GLOBAL-002 | Convert to event-driven, interest-set bounded processing. | Avoids O(N) frame scaling. |
| PERF-EVT-001 | Macro scheduler processes only due entries (latent universe stays bounded). | CTest `engine_due_sched` | Test | CI fail: PERF-EVT-001 | Register macro objects with due scheduler; avoid global sweeps. | Keeps idle universe near-zero cost. |
| PERF-EVT-002 | Deterministic ordering for due-event processing is enforced. | CTest `engine_due_sched` | Test | CI fail: PERF-EVT-002 | Provide stable keys and deterministic queues. | Prevents order-dependent divergence. |
| PERF-IOBAN-001 | Render/UI thread IO is FORBIDDEN. | Runtime guard + CTest `engine_perf_no_modal` | Test | CI fail: PERF-IOBAN-001 | Move IO to derived jobs; keep UI/render thread no-block. | Prevents blocking IO hitches. |
| PERF-MODAL-001 | Blocking IO on render/UI threads is FORBIDDEN. | Runtime trace + watchdog | Test | CI fail: PERF-MODAL-001 | Move IO to background jobs and stream results. | Prevents hitches and stalls. |
| PERF-SHADER-002 | Shader compilation on demand is FORBIDDEN. | Runtime trace + build audit | Test | CI fail: PERF-SHADER-002 | Precompile shaders or compile during preload. | Avoids runtime shader stalls. |
| PERF-ASSET-003 | Synchronous asset decode on render/UI threads is FORBIDDEN. | Runtime trace | Test | CI fail: PERF-ASSET-003 | Decode asynchronously and cache results. | Keeps UI smooth under load. |
| PERF-STALL-001 | Stall watchdog thresholds are FORBIDDEN to exceed. | Runtime watchdog + CTest `engine_perf_no_modal` | Test | CI fail: PERF-STALL-001 | Reduce stalls or move work off render/UI threads. | Enforces frame budget ceilings. |
| PERF-STALL-004 | Stall watchdog thresholds MUST NOT be exceeded. | Perf regression test | Test | CI fail: PERF-STALL-004 | Reduce stalls or move work off render/UI threads. | Enforces predictable frame budgets. |
| PERF-PROFILE-001 | PERF3 fixtures MUST emit telemetry and required metrics. | CTest `engine_perf_budget_fixture` + tools/ci/perf_budget_check.py | Test | CI fail: PERF-PROFILE-001 | Ensure profiling is enabled and metrics are recorded per lane. | Keeps telemetry consistent and parseable. |
| PERF-FID-005 | Forbidden fidelity degradation is FORBIDDEN. | Scenario tests + invariants | Test | CI fail: PERF-FID-005 | Use only approved degradation mechanisms. | Protects authoritative state integrity. |
| PERF-STREAM-001 | Streaming budgets MUST NOT be exceeded. | Runtime budget check | Test | CI fail: PERF-STREAM-001 | Reduce per-frame IO/decode/job costs. | Keeps streaming bounded. |
| PERF-BUDGET-001 | Tier performance budgets MUST NOT be exceeded. | PERF3 fixture regression | Test | CI fail: PERF-BUDGET-001 | Optimize hot paths or reduce workload. | Enforces tier targets. |
| PERF-BUDGET-002 | Tier performance budgets MUST NOT be exceeded. | tools/ci/perf_budget_check.py against PERF3 reports | Test | CI fail: PERF-BUDGET-002 | Optimize workloads or update PERF_BUDGETS.md thresholds with approval. | Prevents performance regression drift. |
| SCALE-SHARD-001 | Single-writer shard authority is REQUIRED. | Policy/spec lint (SCALE0) | Configure | CI fail: SCALE-SHARD-001 | Define shard authority domains with exactly one writer. | Prevents authority drift and nondeterminism. |
| SCALE-MSG-002 | Cross-shard interaction MUST use scheduled messages only. | Policy/spec lint (SCALE0) | Configure | CI fail: SCALE-MSG-002 | Use deterministic cross-shard messages with arrival_tick/order_key. | Eliminates hidden cross-shard access. |
| SCALE-CLOCK-003 | Per-shard clocks or drift are FORBIDDEN. | Policy/spec lint (SCALE0) | Configure | CI fail: SCALE-CLOCK-003 | Ensure all shards share ACT; pace via batching only. | Preserves determinism across shards. |
| SCALE-INT-001 | Macro/meso update paths MUST accept an InterestSet parameter. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: SCALE-INT-001 | Add dom_interest_set parameters and use them for iteration. | Enforces interest-driven processing. |
| SCALE-INT-002 | Camera/view-driven activation in authoritative code is FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: SCALE-INT-002 | Use explicit interest sources; do not activate simulation from camera/view state. | Prevents UI-driven simulation activation. |
| SCALE-FID-001 | Direct spawn/despawn/destroy patterns outside fidelity interfaces are FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: SCALE-FID-001 | Route lifecycle changes through dom_fidelity request/apply interfaces. | Prevents ad-hoc entity lifecycle changes. |
| SCALE-FID-002 | Ad-hoc approximation/LOD shortcuts in authoritative code are FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: SCALE-FID-002 | Use fidelity projection refine/collapse paths with provenance preservation. | Prevents non-provenanced simplification. |
| SCALE-INT-TEST-001 | Interest sets are deterministic, bounded, and hysteretic. | CTest `dominium_interest` | Test | CI fail: SCALE-INT-TEST-001 | Fix interest-set aggregation, ordering, or hysteresis policy. | Verifies interest set determinism and bounded processing. |
| SCALE-FID-TEST-001 | Fidelity transitions preserve provenance and continuity. | CTest `dominium_fidelity` | Test | CI fail: SCALE-FID-TEST-001 | Fix refine/collapse transitions and provenance preservation. | Verifies fidelity continuity and refusal rules. |
| DATA-SCHEMA-001 | Schema files missing required version metadata are FORBIDDEN. | `data_validate` CLI + `engine_data_validate` CTest | Configure | CI fail: DATA-SCHEMA-001 | Add schema_id, schema_version, and stability fields. | Prevents unversioned data formats. |
| DATA-SCHEMA-002 | Invalid schema version progression is FORBIDDEN. | `data_validate` CLI + `engine_data_validate` CTest | Configure | CI fail: DATA-SCHEMA-002 | Fix version bump rules or add migration/refusal. | Enforces semantic version law. |
| DATA-VALID-001 | Structural schema validation failure is FORBIDDEN. | `data_validate` CLI + `engine_data_validate` CTest | Configure | CI fail: DATA-VALID-001 | Fix structural errors (types/ranges/required fields). | Ensures load safety. |
| DATA-VALID-002 | Determinism/performance schema rule violation is FORBIDDEN. | `data_validate` CLI + `engine_data_validate` CTest | Configure | CI fail: DATA-VALID-002 | Remove nondeterministic or unbounded constructs. | Protects determinism and performance. |
| DATA-MIGRATE-001 | Missing migration for MAJOR schema bump is FORBIDDEN. | `data_validate` CLI + `engine_data_validate` CTest | Configure | CI fail: DATA-MIGRATE-001 | Add explicit version-to-version migration or refuse. | Prevents silent breaking changes. |
| GOV-VAL-001 | Unified governance validator MUST pass (schema metadata + determinism safety). | `tools/validation/validate_all` | Configure | CI fail: GOV-VAL-001 | Add Status/Version metadata; remove float schema fields. | Prevents unversioned or nondeterministic schema drift. |
| GOV-VAL-REND-002 | Rendering canon violations are FORBIDDEN (backend dirs + API refs in game). | `tools/validation/validate_all` | Configure | CI fail: GOV-VAL-REND-002 | Move backends under `engine/render/backends/**`; remove backend API usage in game. | Enforces REND0 rendering canon. |
| GOV-VAL-EPIS-003 | Epistemic UI boundary violations are FORBIDDEN. | `tools/validation/validate_all` | Configure | CI fail: GOV-VAL-EPIS-003 | Use EIL/capability snapshots; remove authoritative includes/calls in UI/tools. | Prevents UI bypass of knowledge gates. |
| GOV-VAL-PROV-004 | Provenance / non-fabrication violations are FORBIDDEN. | `tools/validation/validate_all` | Configure | CI fail: GOV-VAL-PROV-004 | Remove fabrication markers; require provenance-backed construction. | Enforces FP1 non-fabrication law. |
| GOV-VAL-PERF-005 | Performance schema violations are FORBIDDEN (unbounded lists, missing fallbacks). | `tools/validation/validate_all` | Configure | CI fail: GOV-VAL-PERF-005 | Add bounded sizes and render feature requires/fallback/cost. | Prevents unbounded or non-scalable content. |
| PH6-AUDIT-001 | Phase 6 audit gates MUST pass (docs, CI IDs, test assets). | `tools/ci/phase6_audit_checks.py` (CTest `phase6_audit`) | Test | CI fail: PH6-AUDIT-001 | Restore required Phase 6 docs/tests and CI matrix IDs. | Ensures Phase 6 coverage stays complete. |
| PERF-NOMODAL-001 | Modal loading is FORBIDDEN. | Runtime trace + watchdog | Test | CI fail: PERF-NOMODAL-001 | Move work to async pipelines. | Eliminates blocking loads. |
| UI-BYPASS-001 | UI code reading authoritative world state is FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: UI-BYPASS-001 | Route UI through authorized projection layers. | Preserves epistemic separation. |
| EPIS-BYPASS-001 | UI includes authoritative headers are FORBIDDEN. | Static scan (tools/ci/arch_checks.py) + CTest `dominium_epistemic_ui_bypass` | Test | CI fail: EPIS-BYPASS-001 | Include EIL/capability snapshot headers only. | Blocks direct sim access from UI zones. |
| EPIS-API-002 | UI calls forbidden sim/world APIs are FORBIDDEN. | Static scan (tools/ci/arch_checks.py) | Configure | CI fail: EPIS-API-002 | Route UI access through EIL only. | Prevents authoritative queries from UI. |
| EPIS-CAP-003 | UI displays info without capability justification is FORBIDDEN. | CTest `dominium_epistemic` | Test | CI fail: EPIS-CAP-003 | Use capability snapshots and epistemic queries for UI output. | Ensures UI reflects epistemic state only. |
| BUILD-GLOBAL-001 | `include_directories()` or `link_directories()` usage is FORBIDDEN. | Configure-time check (`scripts/verify_cmake_no_global_includes.py`) + arch_checks (link_directories) | Configure | CI fail: BUILD-GLOBAL-001 | Use target-scoped include/link directories only. | Prevents global include leakage. |
| LIFE-SPEC-001 | LIFE continuity spec is required. | Documentation gate (manual audit) | Docs | Audit fail: LIFE-SPEC-001 | Add/update `schema/life/SPEC_LIFE_CONTINUITY.md`. | Establishes person/body/controller canon. |
| LIFE-SPEC-002 | LIFE death and estate spec is required. | Documentation gate (manual audit) | Docs | Audit fail: LIFE-SPEC-002 | Add/update `schema/life/SPEC_DEATH_AND_ESTATE.md`. | Ensures deterministic death and estate creation. |
| LIFE-SPEC-003 | LIFE control authority spec is required. | Documentation gate (manual audit) | Docs | Audit fail: LIFE-SPEC-003 | Add/update `schema/life/SPEC_CONTROL_AUTHORITY.md`. | Defines control delegation and authority resolution. |
| LIFE-SPEC-004 | LIFE continuation policies spec is required. | Documentation gate (manual audit) | Docs | Audit fail: LIFE-SPEC-004 | Add/update `schema/life/SPEC_CONTINUATION_POLICIES.md`. | Defines S1â€“S4 continuation and ability packages. |
| LIFE-SPEC-005 | LIFE birth/lineage overview spec is required. | Documentation gate (manual audit) | Docs | Audit fail: LIFE-SPEC-005 | Add/update `schema/life/SPEC_BIRTH_LINEAGE_OVERVIEW.md`. | Reserves lineage schema and constraints for LIFE3. |
| LIFE-CONT-DET-001 | Continuation candidate selection MUST be deterministic. | CTest `dominium_life_continuation` | Test | CI fail: LIFE-CONT-DET-001 | Use stable ordering and tie-breaks (`person_id`, reason priority). | Prevents divergence across peers. |
| LIFE-CONT-AUTH-001 | Continuation MUST enforce control authority rules. | CTest `dominium_life_continuation` | Test | CI fail: LIFE-CONT-AUTH-001 | Require authority records before transferring control. | Prevents unauthorized control transfer. |
| LIFE-CONT-NOFAB-001 | Continuation MUST NOT fabricate persons or bodies. | CTest `dominium_life_continuation` | Test | CI fail: LIFE-CONT-NOFAB-001 | Use pending actions and explicit construction pipelines only. | Enforces provenance and no-fabrication law. |
| LIFE-DEATH-DET-001 | Death pipeline produces deterministic estate records. | CTest `dominium_life_death` | Test | CI fail: LIFE-DEATH-DET-001 | Sort account IDs and use stable IDs for death events and estates. | Prevents nondeterministic estate ordering. |
| LIFE-LEDGER-001 | Death MUST NOT change ledger balances. | CTest `dominium_life_death` | Test | CI fail: LIFE-LEDGER-001 | Keep balances intact; only change ownership relations. | Preserves ledger conservation. |
| LIFE-INH-SCHED-001 | Inheritance scheduling MUST fire at exact ACT ticks. | CTest `dominium_life_death` | Test | CI fail: LIFE-INH-SCHED-001 | Use ACT-based claim periods and due-event scheduling only. | Ensures batch vs step equivalence. |
| LIFE-ESTATE-AUTH-001 | Estate resolution requires explicit executor authority. | CTest `dominium_life_death` | Test | CI fail: LIFE-ESTATE-AUTH-001 | Refuse resolution without authority; do not transfer assets. | Prevents unauthorized estate execution. |
| LIFE-EPIS-001 | Death knowledge is not omniscient. | CTest `dominium_life_death` | Test | CI fail: LIFE-EPIS-001 | Emit death notices via explicit epistemic hooks only. | Enforces epistemic boundary. |
| LIFE-REPLAY-001 | Death/estate replay equivalence MUST hold. | CTest `dominium_life_death` | Test | CI fail: LIFE-REPLAY-001 | Ensure deterministic IDs and ordering for death and estate records. | Keeps replay stable. |
| LIFE-BIRTH-DET-001 | Birth scheduling MUST be deterministic. | CTest `dominium_life_birth` | Test | CI fail: LIFE-BIRTH-DET-001 | Use ACT-based gestation ticks and deterministic scheduling. | Prevents divergence in birth timing. |
| LIFE-BIRTH-RES-001 | Births MUST enforce resource constraints. | CTest `dominium_life_birth` | Test | CI fail: LIFE-BIRTH-RES-001 | Require food/shelter constraints before scheduling gestation. | Prevents fabricated population growth. |
| LIFE-LINEAGE-DET-001 | Lineage records MUST be deterministic. | CTest `dominium_life_birth` | Test | CI fail: LIFE-LINEAGE-DET-001 | Sort parent IDs and preserve certainty flags deterministically. | Keeps lineage stable across peers. |
| LIFE-COHORT-001 | Cohort/micro birth integration MUST preserve counts. | CTest `dominium_life_birth` | Test | CI fail: LIFE-COHORT-001 | Update cohorts only in macro mode; preserve counts across refinement. | Prevents population drift. |
| LIFE-BIRTH-EPIS-001 | Birth knowledge is not omniscient. | CTest `dominium_life_birth` | Test | CI fail: LIFE-BIRTH-EPIS-001 | Emit birth notices via explicit epistemic hooks only. | Enforces epistemic boundary. |
| LIFE-BIRTH-BATCH-001 | Gestation completion MUST be batch vs step equivalent. | CTest `dominium_life_birth` | Test | CI fail: LIFE-BIRTH-BATCH-001 | Use due-event scheduler with deterministic ordering. | Preserves determinism under batching. |
| CIV0a-EVENT-001 | Cohort consumption MUST be scheduled via next_due_tick. | CTest `dominium_civ0a_survival` | Test | CI fail: CIV0a-EVENT-001 | Use due-event scheduling; no per-tick scans. | Enforces event-driven survival loop. |
| CIV0a-NOGLOB-001 | Global cohort iteration in survival is FORBIDDEN. | CTest `dominium_civ0a_survival` | Test | CI fail: CIV0a-NOGLOB-001 | Process only due cohorts via scheduler. | Prevents O(N) survival ticks. |
| CIV0-NOGLOB-001 | Global iteration for population cohorts/households is FORBIDDEN. | CTest `dominium_civ0_population` | Test | CI fail: CIV0-NOGLOB-001 | Process only due cohorts/flows via scheduler. | Prevents population scaling with world size. |
| CIV0-NEXTDUE-001 | Population cohorts MUST provide next_due_tick for macro stepping. | CTest `dominium_civ0_population` | Test | CI fail: CIV0-NEXTDUE-001 | Register cohorts with due scheduler and set next_due_tick. | Enforces event-driven population updates. |
| CIV0-DET-001 | Population updates MUST be batch vs step equivalent. | CTest `dominium_civ0_population` | Test | CI fail: CIV0-DET-001 | Use deterministic ordering and ACT-based scheduling only. | Preserves determinism across stepping modes. |
| CIV1-PROD-DET-001 | Production outputs and timing MUST be deterministic. | CTest `dominium_civ1_city_infra` | Test | CI fail: CIV1-PROD-DET-001 | Ensure recipe ordering and stable machine scheduling. | Prevents production divergence. |
| CIV1-BATCH-001 | Production chains MUST be batch vs step equivalent. | CTest `dominium_civ1_city_infra` | Test | CI fail: CIV1-BATCH-001 | Use ACT-based scheduling and deterministic ordering. | Preserves step/batch equivalence. |
| CIV1-LOG-DET-001 | Logistics flow arrivals MUST be deterministic. | CTest `dominium_civ1_city_infra` | Test | CI fail: CIV1-LOG-DET-001 | Use scheduled arrivals and stable flow IDs. | Prevents logistics desync. |
| CIV1-NOGLOB-001 | Global iteration over machines/cities is FORBIDDEN. | CTest `dominium_civ1_city_infra` | Test | CI fail: CIV1-NOGLOB-001 | Process only due machines via scheduler. | Keeps infra scalable. |
| CIV1-FID-001 | Macro <-> micro totals MUST be preserved on collapse/refine. | CTest `dominium_civ1_city_infra` | Test | CI fail: CIV1-FID-001 | Preserve inventory totals and provenance summaries. | Prevents fidelity drift. |
| CIV2-JURIS-DET-001 | Jurisdiction creation MUST be deterministic. | CTest `dominium_civ2_governance` | Test | CI fail: CIV2-JURIS-DET-001 | Use stable jurisdiction IDs and ordered registries. | Prevents governance divergence. |
| CIV2-NEXTDUE-001 | Governance MUST be event-driven (next_due_tick). | CTest `dominium_civ2_governance` | Test | CI fail: CIV2-NEXTDUE-001 | Schedule policies and legitimacy updates via due scheduler. | Avoids global polity scans. |
| CIV2-LEGIT-DET-001 | Legitimacy updates MUST be deterministic and batch-safe. | CTest `dominium_civ2_governance` | Test | CI fail: CIV2-LEGIT-DET-001 | Use scheduled legitimacy events only. | Preserves legitimacy determinism. |
| CIV2-POLICY-T4-001 | Policy schedules MUST be deterministic under T4 recurrence. | CTest `dominium_civ2_governance` | Test | CI fail: CIV2-POLICY-T4-001 | Use ACT/T4 scheduling and stable ordering. | Prevents policy drift. |
| CIV2-STAND-RES-001 | Standards resolution order MUST be enforced. | CTest `dominium_civ2_governance` | Test | CI fail: CIV2-STAND-RES-001 | Apply explicit -> org -> jurisdiction -> personal -> fallback order. | Ensures consistent standards. |
| CIV2-EPIS-001 | Policy knowledge MUST be epistemically gated. | CTest `dominium_civ2_governance` | Test | CI fail: CIV2-EPIS-001 | Use epistemic sets for policy visibility. | Prevents omniscient governance UI. |
| CIV3-RES-DET-001 | Research completion MUST be deterministic. | CTest `dominium_civ3_knowledge` | Test | CI fail: CIV3-RES-DET-001 | Use stable process IDs and deterministic completion order. | Prevents research divergence. |
| CIV3-BATCH-001 | Research scheduling MUST be batch vs step equivalent. | CTest `dominium_civ3_knowledge` | Test | CI fail: CIV3-BATCH-001 | Use ACT-based due scheduling only. | Preserves determinism under batching. |
| CIV3-DIFF-DET-001 | Knowledge diffusion delays MUST be deterministic. | CTest `dominium_civ3_knowledge` | Test | CI fail: CIV3-DIFF-DET-001 | Schedule diffusion by ACT and stable ordering keys. | Prevents diffusion desync. |
| CIV3-SECRECY-001 | Secrecy policies MUST gate diffusion deterministically. | CTest `dominium_civ3_knowledge` | Test | CI fail: CIV3-SECRECY-001 | Enforce explicit secrecy policies; block disallowed diffusion. | Prevents knowledge leaks. |
| CIV3-TECH-001 | Tech activation requires knowledge prerequisites and explicit acknowledgement. | CTest `dominium_civ3_knowledge` | Test | CI fail: CIV3-TECH-001 | Check prerequisites before activation and require explicit request. | Prevents implicit tech unlocks. |
| CIV3-NOGLOB-001 | Global iteration in knowledge/research/diffusion is FORBIDDEN. | CTest `dominium_civ3_knowledge` | Test | CI fail: CIV3-NOGLOB-001 | Process only due research/diffusion events via scheduler. | Keeps knowledge systems scalable. |
| CIV4-FLOW-DET-001 | Long-range shipment arrivals MUST be deterministic. | CTest `dominium_civ4_scale` | Test | CI fail: CIV4-FLOW-DET-001 | Use deterministic travel time and stable flow ordering. | Prevents logistics desync. |
| CIV4-BATCH-001 | Long-range travel MUST be batch vs step equivalent. | CTest `dominium_civ4_scale` | Test | CI fail: CIV4-BATCH-001 | Use ACT-based scheduling only; no per-tick drift. | Preserves determinism under batching. |
| CIV4-INT-001 | Interest-bound refinement across scales MUST be enforced. | CTest `dominium_civ4_scale` | Test | CI fail: CIV4-INT-001 | Require explicit interest bindings; avoid global activation. | Prevents accidental global simulation. |
| CIV4-WARP-001 | Scale-aware time warp MUST be deterministic. | CTest `dominium_civ4_scale` | Test | CI fail: CIV4-WARP-001 | Clamp warp by domain rules and interest caps. | Prevents warp desync. |
| CIV4-HANDOFF-001 | Cross-domain handoff ordering MUST be deterministic. | CTest `dominium_civ4_scale` | Test | CI fail: CIV4-HANDOFF-001 | Use stable keys and deterministic ordering at arrivals. | Prevents shard handoff divergence. |
| CIV5-WAR0-SPEC-001 | Conflict canon spec is required. | Documentation gate (manual audit) | Docs | Audit fail: CIV5-WAR0-SPEC-001 | Add/update `schema/war/SPEC_CONFLICT_CANON.md`. | Defines deterministic conflict canon. |
| CIV5-WAR0-SPEC-002 | Security forces spec is required. | Documentation gate (manual audit) | Docs | Audit fail: CIV5-WAR0-SPEC-002 | Add/update `schema/war/SPEC_SECURITY_FORCES.md`. | Defines force schema and constraints. |
| CIV5-WAR0-SPEC-003 | Engagements spec is required. | Documentation gate (manual audit) | Docs | Audit fail: CIV5-WAR0-SPEC-003 | Add/update `schema/war/SPEC_ENGAGEMENTS.md`. | Defines deterministic engagement events. |
| CIV5-WAR0-SPEC-004 | Occupation and resistance spec is required. | Documentation gate (manual audit) | Docs | Audit fail: CIV5-WAR0-SPEC-004 | Add/update `schema/war/SPEC_OCCUPATION_AND_RESISTANCE.md`. | Defines occupation/resistance model. |
| CIV5-WAR0-SPEC-005 | Interplanetary war spec is required. | Documentation gate (manual audit) | Docs | Audit fail: CIV5-WAR0-SPEC-005 | Add/update `schema/war/SPEC_INTERPLANETARY_WAR.md`. | Defines multi-scale war model. |
| CIV5-WAR0-SPEC-006 | War schema index is required. | Documentation gate (manual audit) | Docs | Audit fail: CIV5-WAR0-SPEC-006 | Add/update `schema/war/README.md`. | Ensures war schema index and versioning. |
| CIV5-WAR1-MOB-DET-001 | Mobilization determinism MUST hold. | CTest `dominium_civ5_war1_security_force` | Test | CI fail: CIV5-WAR1-MOB-DET-001 | Fix force ID ordering, scheduling, or registry inserts. | Ensures deterministic mobilization. |
| CIV5-WAR1-NOFAB-002 | Mobilization MUST refuse missing population/equipment. | CTest `dominium_civ5_war1_security_force` | Test | CI fail: CIV5-WAR1-NOFAB-002 | Enforce population/equipment checks before creation. | Enforces non-fabrication law. |
| CIV5-WAR1-BATCH-003 | Readiness scheduling MUST be batch vs step equivalent. | CTest `dominium_civ5_war1_security_force` | Test | CI fail: CIV5-WAR1-BATCH-003 | Fix due-event ordering or event processing. | Preserves deterministic stepping. |
| CIV5-WAR1-DEMOB-004 | Demobilization MUST conserve population/equipment. | CTest `dominium_civ5_war1_security_force` | Test | CI fail: CIV5-WAR1-DEMOB-004 | Return cohorts and equipment to registries. | Prevents resource loss. |
| CIV5-WAR1-EPIS-005 | Security force visibility MUST be epistemically gated. | CTest `dominium_civ5_war1_security_force` | Test | CI fail: CIV5-WAR1-EPIS-005 | Use estimates when capability is absent. | Enforces epistemic boundary. |
| CIV5-WAR2-DET-001 | Engagement resolution MUST be deterministic. | CTest `dominium_civ5_war2_engagement` | Test | CI fail: CIV5-WAR2-DET-001 | Fix resolution ordering or outcome math. | Ensures deterministic engagement resolution. |
| CIV5-WAR2-BATCH-002 | Engagement scheduling MUST be batch vs step equivalent. | CTest `dominium_civ5_war2_engagement` | Test | CI fail: CIV5-WAR2-BATCH-002 | Fix due-event scheduling or resolution gating. | Preserves event-driven equivalence. |
| CIV5-WAR2-CAS-003 | Casualty conservation MUST hold. | CTest `dominium_civ5_war2_engagement` | Test | CI fail: CIV5-WAR2-CAS-003 | Ensure cohort counts drop correctly and never go negative. | Enforces casualty conservation. |
| CIV5-WAR2-LOG-004 | Logistics depletion MUST degrade outcomes deterministically. | CTest `dominium_civ5_war2_engagement` | Test | CI fail: CIV5-WAR2-LOG-004 | Apply supply penalties deterministically when undersupplied. | Enforces logistics impact. |
| CIV5-WAR2-EPIS-005 | Engagement outcomes MUST be epistemically gated. | CTest `dominium_civ5_war2_engagement` | Test | CI fail: CIV5-WAR2-EPIS-005 | Use outcome estimates when capability is absent. | Enforces epistemic boundary. |
| CIV5-WAR3-OCC-001 | Occupation maintenance MUST fail deterministically without supply. | CTest `dominium_civ5_war3_occupation` | Test | CI fail: CIV5-WAR3-OCC-001 | Enforce supply checks before occupation maintenance. | Ensures deterministic occupation failure. |
| CIV5-WAR3-RES-002 | Resistance activation MUST be deterministic on legitimacy deficit. | CTest `dominium_civ5_war3_occupation` | Test | CI fail: CIV5-WAR3-RES-002 | Apply legitimacy thresholds deterministically. | Ensures resistance triggers are stable. |
| CIV5-WAR3-DISR-003 | Disruption effects MUST be deterministic. | CTest `dominium_civ5_war3_occupation` | Test | CI fail: CIV5-WAR3-DISR-003 | Remove RNG and apply fixed capacity reductions. | Ensures deterministic logistics disruption. |
| CIV5-WAR3-BATCH-004 | Occupation timelines MUST be batch vs step equivalent. | CTest `dominium_civ5_war3_occupation` | Test | CI fail: CIV5-WAR3-BATCH-004 | Fix due-event rescheduling and ordering. | Preserves event-driven equivalence. |
| CIV5-WAR3-NOGLOB-005 | Occupation/resistance MUST avoid global iteration. | CTest `dominium_civ5_war3_occupation` | Test | CI fail: CIV5-WAR3-NOGLOB-005 | Process only due territories via scheduler. | Prevents O(N) territory scans. |
| CIV5-WAR4-BLOCK-001 | Blockade effects MUST be deterministic. | CTest `dominium_civ5_war4_scale` | Test | CI fail: CIV5-WAR4-BLOCK-001 | Apply deny/throttle/inspect deterministically. | Ensures deterministic blockade effects. |
| CIV5-WAR4-INT-002 | Interdiction scheduling MUST be deterministic. | CTest `dominium_civ5_war4_scale` | Test | CI fail: CIV5-WAR4-INT-002 | Use ACT-based scheduling and stable IDs. | Ensures interdiction determinism. |
| CIV5-WAR4-SIEGE-003 | Siege deprivation MUST be batch vs step equivalent. | CTest `dominium_civ5_war4_scale` | Test | CI fail: CIV5-WAR4-SIEGE-003 | Use deterministic deprivation updates only. | Preserves siege determinism. |
| CIV5-WAR4-NOGLOB-004 | War4 scale updates MUST avoid global iteration. | CTest `dominium_civ5_war4_scale` | Test | CI fail: CIV5-WAR4-NOGLOB-004 | Process only due routes and domains. | Prevents O(N) route scans. |
| CIV5-WAR4-SHARD-005 | Shard message ordering MUST be deterministic. | CTest `dominium_civ5_war4_scale` | Test | CI fail: CIV5-WAR4-SHARD-005 | Enforce stable arrival/order keys. | Preserves cross-shard ordering. |
| CONTENT0-SPEC-001 | Universe model spec is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT0-SPEC-001 | Add/update `schema/world/SPEC_UNIVERSE_MODEL.md`. | Defines universe data model. |
| CONTENT0-SPEC-002 | Galaxy model spec is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT0-SPEC-002 | Add/update `schema/world/SPEC_GALAXY_MODEL.md`. | Defines galaxy data model. |
| CONTENT0-SPEC-003 | Star system model spec is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT0-SPEC-003 | Add/update `schema/world/SPEC_SYSTEM_MODEL.md`. | Defines star system data model. |
| CONTENT0-SPEC-004 | Celestial body spec is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT0-SPEC-004 | Add/update `schema/world/SPEC_CELESTIAL_BODY.md`. | Defines body data model. |
| CONTENT0-SPEC-005 | Orbital rails spec is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT0-SPEC-005 | Add/update `schema/world/SPEC_ORBITAL_RAILS.md`. | Defines deterministic orbital rails. |
| CONTENT0-SPEC-006 | Surface and regions spec is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT0-SPEC-006 | Add/update `schema/world/SPEC_SURFACE_AND_REGIONS.md`. | Defines surface, region, and volume data. |
| CONTENT0-SPEC-007 | World data import spec is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT0-SPEC-007 | Add/update `schema/world/SPEC_WORLD_DATA_IMPORT.md`. | Defines deterministic import rules. |
| CONTENT0-SPEC-008 | World schema index is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT0-SPEC-008 | Add/update `schema/world/README.md`. | Ensures world schema index and versioning. |
| CONTENT1-DATA-001 | Sol system data files are required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT1-DATA-001 | Add `data/world/sol/sol.system.json` and related files. | Establishes canonical Sol content baseline. |
| CONTENT1-DATA-002 | Sol orbital rails data is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT1-DATA-002 | Add `data/world/sol/sol.orbits.json`. | Defines deterministic orbital rails for Sol. |
| CONTENT1-DATA-003 | Sol bodies, moons, and belts data are required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT1-DATA-003 | Add `data/world/sol/sol.bodies/`, `sol.moons/`, `sol.belts/`. | Provides canonical celestial body records. |
| CONTENT1-DATA-004 | Sol surfaces and regions data are required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT1-DATA-004 | Add `data/world/sol/sol.surfaces.json`. | Defines surfaces and regions for gameplay. |
| CONTENT1-TEST-001 | Sol data validation must pass. | CTest `dominium_content1_sol_data` | Test | CI fail: CONTENT1-TEST-001 | Fix data structure or references in `data/world/sol`. | Enforces schema-aligned Sol content. |
| CONTENT2-DATA-001 | Earth body data is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT2-DATA-001 | Add `data/world/sol/earth/earth.body.json`. | Defines Earth body baseline. |
| CONTENT2-DATA-002 | Earth surface and volume data is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT2-DATA-002 | Add `data/world/sol/earth/earth.surfaces/`. | Defines layered Earth surfaces and volumes. |
| CONTENT2-DATA-003 | Earth region hierarchy data is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT2-DATA-003 | Add `data/world/sol/earth/earth.regions/`. | Defines bounded region hierarchy. |
| CONTENT2-DATA-004 | Earth climate and biome tags are required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT2-DATA-004 | Add `data/world/sol/earth/earth.climate/`. | Defines climate zones and biome tags. |
| CONTENT2-DATA-005 | Earth import hooks documentation is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT2-DATA-005 | Add `data/world/sol/earth/earth.imports/README.md`. | Documents import overlay rules. |
| CONTENT2-TEST-001 | Earth data validation must pass. | CTest `dominium_content2_earth_data` | Test | CI fail: CONTENT2-TEST-001 | Fix Earth data structure or references. | Enforces schema-aligned Earth content. |
| CONTENT3-DATA-001 | Milky Way galaxy data is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT3-DATA-001 | Add `data/world/milky_way/milky_way.galaxy.json`. | Defines Milky Way galaxy metadata. |
| CONTENT3-DATA-002 | Milky Way arms and regions data is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT3-DATA-002 | Add `data/world/milky_way/milky_way.arms.json` and `milky_way.regions.json`. | Defines arms and galactic regions. |
| CONTENT3-DATA-003 | Milky Way anchors data is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT3-DATA-003 | Add `data/world/milky_way/milky_way.anchors.json`. | Defines canonical anchor systems. |
| CONTENT3-DATA-004 | Milky Way procedural rules data is required. | Documentation gate (manual audit) | Docs | Audit fail: CONTENT3-DATA-004 | Add `data/world/milky_way/milky_way.procedural_rules.json`. | Defines deterministic fill rules. |
| CONTENT3-TEST-001 | Milky Way data validation must pass. | CTest `dominium_content3_milky_way_data` | Test | CI fail: CONTENT3-TEST-001 | Fix Milky Way data structure or references. | Enforces schema-aligned Milky Way content. |
| AGENT1-GOAL-DET-001 | Agent goal selection MUST be deterministic. | CTest `dominium_agent1_goal_planning` | Test | CI fail: AGENT1-GOAL-DET-001 | Fix goal priority ordering or tie-breaks. | Ensures deterministic goal evaluation. |
| AGENT1-PLAN-BOUND-002 | Agent planning MUST respect bounded step limits. | CTest `dominium_agent1_goal_planning` | Test | CI fail: AGENT1-PLAN-BOUND-002 | Enforce max step/depth caps in planning. | Prevents unbounded planning. |
| AGENT1-EPIS-003 | Agent belief updates MUST be epistemically gated. | CTest `dominium_agent1_goal_planning` | Test | CI fail: AGENT1-EPIS-003 | Apply epistemic refusals and belief updates deterministically. | Preserves epistemic limits. |
| AGENT1-BATCH-004 | Agent scheduling MUST be batch vs step equivalent. | CTest `dominium_agent1_goal_planning` | Test | CI fail: AGENT1-BATCH-004 | Fix due scheduler integration and rescheduling. | Preserves event-driven determinism. |
| AGENT1-ABSENCE-005 | Agent absence MUST not affect simulation. | CTest `dominium_agent1_goal_planning` | Test | CI fail: AGENT1-ABSENCE-005 | Remove agent-required paths or side effects. | Keeps baseline gameplay agent-free. |
| AGENT2-DOCTRINE-DET-001 | Doctrine filtering MUST be deterministic. | CTest `dominium_agent2_doctrine` | Test | CI fail: AGENT2-DOCTRINE-DET-001 | Fix doctrine goal filtering or ordering. | Ensures deterministic doctrine application. |
| AGENT2-PRIORITY-002 | Doctrine priority modifiers MUST be deterministic. | CTest `dominium_agent2_doctrine` | Test | CI fail: AGENT2-PRIORITY-002 | Apply fixed-point modifiers deterministically. | Preserves priority stability. |
| AGENT2-CONFLICT-003 | Conflicting doctrine resolution MUST be deterministic. | CTest `dominium_agent2_doctrine` | Test | CI fail: AGENT2-CONFLICT-003 | Enforce explicit->role->org->jurisdiction->personal ordering. | Prevents doctrine drift. |
| AGENT2-COHORT-004 | Cohort-level autonomy collapse MUST be deterministic. | CTest `dominium_agent2_doctrine` | Test | CI fail: AGENT2-COHORT-004 | Aggregate plans deterministically per cohort. | Preserves scalability. |
| AGENT2-BATCH-005 | Doctrine scheduling MUST be batch vs step equivalent. | CTest `dominium_agent2_doctrine` | Test | CI fail: AGENT2-BATCH-005 | Fix doctrine scheduler due-event ordering. | Preserves event-driven determinism. |
| AGENT2-NODOC-006 | Doctrine absence MUST refuse autonomous actions. | CTest `dominium_agent2_doctrine` | Test | CI fail: AGENT2-NODOC-006 | Require doctrine binding before autonomous decisions. | Prevents unmanaged autonomy. |
| AGENT3-AGG-DET-001 | Aggregate vs individual goal evaluation MUST be deterministic. | CTest `dominium_agent3_aggregation` | Test | CI fail: AGENT3-AGG-DET-001 | Align aggregate contexts and goal evaluation ordering. | Preserves aggregate equivalence. |
| AGENT3-REFINE-DET-002 | Refinement selection MUST be deterministic. | CTest `dominium_agent3_aggregation` | Test | CI fail: AGENT3-REFINE-DET-002 | Use stable ordering for candidate selection. | Prevents refinement drift. |
| AGENT3-COLLAPSE-DET-003 | Collapse summaries MUST be deterministic. | CTest `dominium_agent3_aggregation` | Test | CI fail: AGENT3-COLLAPSE-DET-003 | Aggregate beliefs/goals deterministically. | Preserves causality. |
| AGENT3-NOAGENT-004 | Aggregation MUST not require individual agents. | CTest `dominium_agent3_aggregation` | Test | CI fail: AGENT3-NOAGENT-004 | Ensure zero-agent paths are safe and deterministic. | Keeps agents optional. |
| AGENT3-BATCH-005 | Refinement/collapse MUST be batch vs step equivalent. | CTest `dominium_agent3_aggregation` | Test | CI fail: AGENT3-BATCH-005 | Fix event ordering for transitions. | Preserves event-driven equivalence. |
| MOD0-ORDER-001 | Mod graph ordering MUST be deterministic. | CTest `dominium_mod0_compat` | Test | CI fail: MOD0-ORDER-001 | Fix graph sort/tie-breaks. | Prevents mod order drift. |
| MOD0-CONFLICT-002 | Mod conflicts MUST be refused. | CTest `dominium_mod0_compat` | Test | CI fail: MOD0-CONFLICT-002 | Enforce conflict checks in resolver. | Prevents incompatible stacks. |
| MOD0-MISSING-003 | Missing dependencies MUST be refused. | CTest `dominium_mod0_compat` | Test | CI fail: MOD0-MISSING-003 | Require dependency presence and ranges. | Prevents undefined mod stacks. |
| MOD0-SAFE-004 | Safe mode decisions MUST be deterministic. | CTest `dominium_mod0_compat` | Test | CI fail: MOD0-SAFE-004 | Fix safe mode filtering order. | Ensures reproducible safe mode. |
| MOD0-HASH-005 | Mod graph identity hash MUST be stable. | CTest `dominium_mod0_compat` | Test | CI fail: MOD0-HASH-005 | Normalize hashing inputs and ordering. | Binds replays/saves to mod identity. |
| FINAL-COMPAT-001 | Schema major bump requires migration or refusal policy. | `tools/validation/validate_all` | Configure | CI fail: FINAL-COMPAT-001 | Update compatibility promises and migration notes. | Prevents silent schema breaks. |
| FINAL-API-001 | Engine public API changes require ABI notes. | `tools/validation/validate_all` | Configure | CI fail: FINAL-API-001 | Update long-term support policy with ABI notes. | Preserves ABI stability. |
| FINAL-EPOCH-001 | Sim-affecting change requires epoch bump policy. | `tools/validation/validate_all` | Configure | CI fail: FINAL-EPOCH-001 | Update feature epoch policy for sim changes. | Prevents hidden semantic drift. |
| FINAL-RENDER-001 | Backend removal requires lifecycle doc update. | `tools/validation/validate_all` | Configure | CI fail: FINAL-RENDER-001 | Update render backend lifecycle policy. | Enforces renderer lifecycle discipline. |
| FINAL-DOC-001 | FINAL0 policy docs and schema references must exist. | `tools/validation/validate_all` | Configure | CI fail: FINAL-DOC-001 | Restore policy docs and schema governance references. | Keeps maintenance governance explicit. |
| TOOL0-REPLAY-DET-001 | Replay inspection MUST not alter hash or ordering. | CTest `dominium_tool0_inspection` | Test | CI fail: TOOL0-REPLAY-DET-001 | Ensure replay inspection is read-only and deterministic. | Preserves replay auditability. |
| TOOL0-PROV-TRACE-002 | Provenance trace MUST be deterministic. | CTest `dominium_tool0_inspection` | Test | CI fail: TOOL0-PROV-TRACE-002 | Fix provenance parent selection/order. | Preserves audit trace integrity. |
| TOOL0-LEDGER-003 | Ledger inspection MUST report conservation. | CTest `dominium_tool0_inspection` | Test | CI fail: TOOL0-LEDGER-003 | Ensure ledger inspection sums balance deterministically. | Verifies conservation without mutation. |
| TOOL0-NOMUT-004 | Tool mutation requests MUST be refused. | CTest `dominium_tool0_inspection` | Test | CI fail: TOOL0-NOMUT-004 | Block any tool-side mutation paths. | Prevents privileged backdoors. |
| TOOL0-VAL-001 | Tooling inventory MUST be present. | `tools/validation/validate_all` | Configure | CI fail: TOOL0-VAL-001 | Restore required TOOL0 files and docs. | Keeps tooling substrate complete. |
| HYGIENE-SCAN-001 | Hygiene scan queue MUST be up to date. | `scripts/ci/check_hygiene_scan.py` (check mode) | Configure | CI fail: HYGIENE-SCAN-001 | Run scan in write mode and commit updated queue. | Keeps hygiene queue current. |
| HYGIENE-ENUM-002 | CUSTOM/OTHER/UNKNOWN enums are forbidden (non-architectural). | `scripts/ci/check_forbidden_enums.py` | Configure | CI fail: HYGIENE-ENUM-002 | Replace with registry ids or remove forbidden tokens. | Preserves closed-world enums. |
| HYGIENE-SWITCH-003 | Switch on taxonomy ids/types is forbidden. | `scripts/ci/check_switch_on_taxonomy.py` | Configure | CI warn/fail: HYGIENE-SWITCH-003 | Use registry dispatch tables instead. | Prevents hardcoded taxonomy branching. |
| HYGIENE-MAGIC-004 | Magic numbers are forbidden outside constants/data. | `scripts/ci/check_magic_numbers.py` | Configure | CI warn/fail: HYGIENE-MAGIC-004 | Replace with named constants or data-driven params. | Eliminates hidden tuning. |
| HYGIENE-TODO-005 | TODOs must use TODO_BLOCKER/FUTURE/DOC format. | `scripts/ci/check_todo_blockers.py` | Configure | CI fail: HYGIENE-TODO-005 | Convert to standardized TODO_* and update blockers. | Keeps blockers auditable. |
| HYGIENE-COMMENT-006 | Comment density + doc blocks are required. | `scripts/ci/check_comment_density.py` | Configure | CI warn/fail: HYGIENE-COMMENT-006 | Add doc blocks or add COMMENT_DENSITY_EXCEPTION. | Ensures invariant rationale is recorded. |
| HYGIENE-ADMIN-007 | isAdmin/isCheat flags are forbidden. | `scripts/ci/check_hygiene_scan.py` | Configure | CI fail: HYGIENE-ADMIN-007 | Replace with law/capability gating. | Prevents privilege backdoors. |
| REPOX-IDE-001 | IDE project files must stay under `/ide/**` or documented packaging inputs. | `scripts/verify_ide_quarantine.py` | Configure | CI fail: REPOX-IDE-001 | Move files into `/ide/**` or list packaging inputs in canon docs. | Enforces IDE quarantine. |
| REPOX-PROJ-002 | IDE projection regeneration must not touch authoritative dirs. | `scripts/verify_projection_regen_clean.py` | Configure | CI fail: REPOX-PROJ-002 | Regenerate with correct presets; ensure outputs land under `/ide/**`. | Keeps projections disposable. |
| REPOX-UI-003 | UI shells must not include engine/game internals. | `scripts/verify_ui_shell_purity.py` | Configure | CI fail: REPOX-UI-003 | Replace with public C ABI headers and adapters. | Enforces UI shell boundaries. |
| REPOX-ABI-004 | Public headers must not expose STL types. | `scripts/verify_abi_boundaries.py` | Configure | CI fail: REPOX-ABI-004 | Replace STL types with stable C ABI types. | Preserves ABI portability. |
| REPOX-DOC-005 | REPOX docs and references must exist. | `scripts/verify_docs_sanity.py` | Docs | CI fail: REPOX-DOC-005 | Add or fix REPOX docs/links. | Keeps governance intact. |
| REPOX-TREE-006 | Repository tree sanity checks must pass. | `scripts/verify_tree_sanity.bat` | Configure | CI fail: REPOX-TREE-006 | Remove forbidden paths and restore canonical layout. | Prevents repo contamination. |
| MP0-PARITY-001 | Offline loopback must match authoritative outcomes. | CTest `dominium_mp0_parity` | Test | CI fail: MP0-PARITY-001 | Use loopback server-auth path; avoid singleplayer-only logic. | Ensures offline parity with MP. |
| MP0-LOCKSTEP-001 | Local lockstep peers must converge identically. | CTest `dominium_mp0_parity` | Test | CI fail: MP0-LOCKSTEP-001 | Ensure deterministic command ordering and simulation. | Prevents lockstep divergence. |
| MP0-SERVERAUTH-001 | Server-auth clients must accept authoritative state without divergence. | CTest `dominium_mp0_parity` | Test | CI fail: MP0-SERVERAUTH-001 | Keep clients non-authoritative and reconcile to server. | Preserves server authority. |
| CTRL-DISABLED-001 | Control disabled determinism must be stable. | CTest `control_disabled_determinism` | Test | CI fail: CTRL-DISABLED-001 | Ensure control layers are off by default and do not change results. | Enforces optional control layers. |
| CTRL-NONINTERF-002 | Control enabled must not alter authoritative outputs. | CTest `control_non_interference` | Test | CI fail: CTRL-NONINTERF-002 | Remove control-side mutations; keep gating external. | Enforces non-interference invariant. |
| CTRL-REGISTRY-003 | Control capability registry must be deterministic. | CTest `control_registry` | Test | CI fail: CTRL-REGISTRY-003 | Fix registry ordering/keys. | Stabilizes control capability IDs. |
| CTRL-REFUSE-004 | Unavailable control capability requests must be refused. | CTest `control_refusal` | Test | CI fail: CTRL-REFUSE-004 | Return explicit refusal for unavailable capabilities. | Preserves refusal semantics. |
| CTRL-AUDIT-005 | Control capability disclosure must enumerate active layers. | CTest `control_audit_disclosure` | Test | CI fail: CTRL-AUDIT-005 | Ensure enabled capabilities are discoverable. | Enforces auditability. |
| CTRL-REMOVE-006 | Control hooks must be removable at build time. | CTest `control_removed_hooks` | Test | CI fail: CTRL-REMOVE-006 | Keep control hooks optional and build-time removable. | Ensures portability and removal. |
| AUTH3-AUTH-001 | Authority upgrades/downgrades must not mutate state. | CTest `authority_claims` | Test | CI fail: AUTH3-AUTH-001 | Keep authority changes side-effect free. | Preserves determinism under profile changes. |
| AUTH3-ENT-002 | Entitlement mapping must refuse missing access. | CTest `entitlement_mapping` | Test | CI fail: AUTH3-ENT-002 | Refuse issuance without entitlements. | Enforces entitlement gating. |
| AUTH3-DEMO-003 | Demo vs paid read paths must match deterministically. | CTest `demo_read_paths` | Test | CI fail: AUTH3-DEMO-003 | Ensure read-only paths are identical. | Prevents demo fork drift. |
| AUTH3-TOURIST-004 | Tourist presence must not alter sim hashes. | CTest `tourist_non_interference` | Test | CI fail: AUTH3-TOURIST-004 | Keep tourist paths read-only. | Enforces non-interference for tourists. |
| AUTH3-SERVICE-005 | Service expiry must degrade authority explicitly. | CTest `services_expiry` | Test | CI fail: AUTH3-SERVICE-005 | Degrade to base_free with explicit refusal. | Keeps services optional and safe. |
| AUTH3-DIST-006 | Single distribution must not embed demo/paid fork markers. | CTest `distribution_single_package` | Test | CI fail: AUTH3-DIST-006 | Keep one package and authority-only demo. | Enforces single distribution rule. |
| AUTH3-PIRACY-007 | Piracy containment yields base_free authority only. | CTest `piracy_base_free` | Test | CI fail: AUTH3-PIRACY-007 | Refuse durable actions without entitlements. | Contains durable value extraction. |
| CIV0-NOFREE-001 | No settlement without a construction contract. | Admission conformance tests (future hook) | Test | CI fail: CIV0-NOFREE-001 | Require construction contract effects for all settlements. | Prevents free cities and outposts. |
| CIV0-NOMAGIC-002 | No resource creation without a production chain. | Admission conformance tests (future hook) | Test | CI fail: CIV0-NOMAGIC-002 | Require production contracts for all resource creation. | Blocks fabricated goods. |
| CIV0-NOINSTA-003 | No logistics bypass of the Travel system. | Admission conformance tests (future hook) | Test | CI fail: CIV0-NOINSTA-003 | Route all goods movement through travel edges and schedules. | Prevents instant supply chains. |
| FUTURE0-INVARIANT-001 | Changes touching invariants require architectural review. | Documentation lint + review gate (future hook) | Docs | CI fail: FUTURE0-INVARIANT-001 | Record arch review and update canon docs. | Prevents silent invariant drift. |
| FUTURE0-MOD-002 | Mods violating schema policy are refused. | Mod validation + schema lint (future hook) | Configure | CI fail: FUTURE0-MOD-002 | Enforce `schema/mod_extension_policy.md`. | Blocks unsafe mods. |
| FUTURE0-NODEBT-003 | No silent fallback for unknown data. | Schema validator (future hook) | Configure | CI fail: FUTURE0-NODEBT-003 | Refuse or preserve unknown fields deterministically. | Prevents hidden behavior drift. |
| LIFE0-NOSPAWN-001 | No life entity creation without a BirthContract. | Admission conformance tests (future hook) | Test | CI fail: LIFE0-NOSPAWN-001 | Require BirthContract effects for all life creation. | Prevents fabricated life. |
| LIFE0-NODESPAWN-002 | No life entity removal without a DeathContract. | Admission conformance tests (future hook) | Test | CI fail: LIFE0-NODESPAWN-002 | Require DeathContract effects for all life removal. | Prevents silent life deletion. |
| LIFE0-NOPOP-003 | No NPC pop-in/out without refinement or collapse contracts. | Contract tests (future hook) | Test | CI fail: LIFE0-NOPOP-003 | Require refinement/collapse contracts for micro appearance/disappearance. | Blocks NPC pop-in. |
| LIFE-REM-DET-001 | Remains creation MUST be deterministic. | CTest `dominium_life_remains` | Test | CI fail: LIFE-REM-DET-001 | Ensure stable IDs/ordering for remains records. | Prevents post-death drift. |
| LIFE-REM-DECAY-001 | Remains decay MUST be batch vs step equivalent. | CTest `dominium_life_remains` | Test | CI fail: LIFE-REM-DECAY-001 | Use due-event scheduler with deterministic ordering. | Preserves decay determinism. |
| LIFE-REM-RIGHTS-001 | Salvage rights resolution order MUST be deterministic. | CTest `dominium_life_remains` | Test | CI fail: LIFE-REM-RIGHTS-001 | Apply contract > executor > jurisdiction > finder ordering only. | Enforces rights order. |
| LIFE-REM-LEDGER-001 | Salvage MUST conserve ledger balances. | CTest `dominium_life_remains` | Test | CI fail: LIFE-REM-LEDGER-001 | Use ledger transactions; no implicit transfer or balance changes. | Preserves ledger conservation. |
| LIFE-REM-EPIS-001 | Salvage MUST be epistemically gated. | CTest `dominium_life_remains` | Test | CI fail: LIFE-REM-EPIS-001 | Require explicit epistemic knowledge before salvage actions. | Prevents omniscient salvage. |
| LIFE-REM-COUNT-001 | Remains collapse/refine MUST preserve counts and provenance. | CTest `dominium_life_remains` | Test | CI fail: LIFE-REM-COUNT-001 | Preserve counts and provenance hashes across collapse/refine. | Prevents provenance loss. |

## Phase-1 Audit Notes (PH1-AUDIT)

- `tools/ci/arch_checks.py` is not invoked by `.github/workflows/ci.yml`. IDs that rely solely on this script are not CI-enforced without an explicit `check_arch` step.
- ID alias conflict: `DET-GATE-*` (docs/policies/DETERMINISM_ENFORCEMENT.md) and `DET-G*` (docs/policies/DETERMINISM_GATES.md) describe the same gates. Align to one canonical ID set.
- `docs/architecture/ARCH_BUILD_ENFORCEMENT.md` references `DET-FLOAT-001`, but the implemented check ID is `DET-FLOAT-003`.
- `BUILD-GLOBAL-001` is enforced for `include_directories()` at configure time; `link_directories()` is only covered by `tools/ci/arch_checks.py`.
- `PERF-STALL-004` and `PERF-BUDGET-001` duplicate `PERF-STALL-001` and `PERF-BUDGET-002` without implementation.
- CANON0 note: ARCH-DEP-005/006 now align with the current build graph (launcher links engine public API; tools link `libs/contracts` plus select engine public APIs).

## Phase-6 Coverage (PH6-AUDIT)

`PH6-AUDIT-001` verifies Phase 6 documentation, test assets, and CI IDs for LIFE/CIV/MP0/GOV.
