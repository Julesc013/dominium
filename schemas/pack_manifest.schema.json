{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Pack Manifest Schema",
  "version": "1.0.0",
  "description": "Canonical pack-driven integration manifest contract with explicit compatibility metadata.",
  "x-doc-ref": [
    "docs/canon/constitution_v1.md ยง3 A9",
    "docs/canon/glossary_v1.md Pack",
    "docs/architecture/pack_system.md"
  ],
  "type": "object",
  "required": [
    "schema_version",
    "pack_id",
    "version",
    "compatibility",
    "dependencies",
    "contribution_types",
    "contributions",
    "canonical_hash",
    "signature_status"
  ],
  "additionalProperties": false,
  "properties": {
    "schema_version": {
      "type": "string",
      "const": "1.0.0"
    },
    "pack_id": {
      "type": "string"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "compatibility": {
      "type": "object",
      "required": [
        "session_spec_min",
        "session_spec_max"
      ],
      "additionalProperties": false,
      "properties": {
        "session_spec_min": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "session_spec_max": {
          "type": "string",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        }
      }
    },
    "dependencies": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "contribution_types": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1
    },
    "contributions": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": [
          "type",
          "id",
          "path"
        ],
        "additionalProperties": false,
        "properties": {
          "type": {
            "type": "string"
          },
          "id": {
            "type": "string",
            "minLength": 1
          },
          "path": {
            "type": "string",
            "minLength": 1
          }
        }
      }
    },
    "canonical_hash": {
      "type": "string",
      "minLength": 1
    },
    "signature_status": {
      "type": "string",
      "enum": [
        "unsigned",
        "signed",
        "verified",
        "revoked"
      ]
    }
  },
  "examples": [
    {
      "schema_version": "1.0.0",
      "pack_id": "pack.lab.galaxy.navigation",
      "version": "1.0.0",
      "compatibility": {
        "session_spec_min": "1.0.0",
        "session_spec_max": "1.0.0"
      },
      "dependencies": [
        "pack.core.runtime"
      ],
      "contribution_types": [
        "domain",
        "ui_windows",
        "lens"
      ],
      "contributions": [
        {
          "type": "domain",
          "id": "domain.navigation",
          "path": "data/domain.navigation.json"
        },
        {
          "type": "lens",
          "id": "lens.diegetic.sensor",
          "path": "data/lens.sensor.json"
        },
        {
          "type": "ui_windows",
          "id": "ui.nav.overlay",
          "path": "ui/nav_overlay.json"
        }
      ],
      "canonical_hash": "b0121a9fcb0e9d8ac6b4bb4b58d8f89fab11802bc4f9b95dd1f17acc36af7ad6",
      "signature_status": "signed"
    }
  ]
}
